import{r as p,b as G,j as e,d as H,a as O,i as v,aw as F,u as T,ax as P,X as z,ay as C,az as L,L as q,aA as U,aB as R,a4 as Q,ai as N,aC as W,aD as X,aE as J,a3 as Y}from"./index-D8dEsisI.js";import{B}from"./breadcrum-B77hC2oY.js";import{P as Z}from"./PaginationProductos-BCASw6MW.js";const $=p.forwardRef(({bsPrefix:t,size:r,vertical:a=!1,className:i,role:c="group",as:s="div",...l},m)=>{const x=G(t,"btn-group");let h=x;return a&&(h=`${x}-vertical`),e.jsx(s,{...l,ref:m,role:c,className:H(i,h,r&&`${x}-${r}`)})});$.displayName="ButtonGroup";const K=({updateQueryParams:t,isCustom:r,isAccesory:a})=>{const i=O(),c=v(u=>u.config),[s,l]=p.useState(c!=null?c[0].categories:null);p.useEffect(()=>{c!=null&&l(c[0].categories)},[c]);const m={border:"1px solid #e0e0e0",padding:"20px",borderRadius:"6px",marginBottom:"5px"},x={padding:"0px",fontSize:"17px"},h={margin:"10px 0px",border:"1px solid #e0e0e0",width:"100%"},o={display:"flex",flexWrap:"wrap"},d={fontSize:"15px",backgroundColor:"#f1f1f1",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"6px",padding:"20px",margin:"6px",width:"60px",height:"20px"},y={fontSize:"15px",backgroundColor:"#f1f1f1",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"6px",padding:"10px",margin:"6px",width:"80px"},S={width:"100px",fontSize:"12px",backgroundColor:"#f1f1f1",border:"none",borderRadius:"6px",padding:"5px",margin:"6px",width:"60px"},b={custom:["00","0","1","2","3","4","5","S","M","L"]};return e.jsxs(e.Fragment,{children:[Object.entries(s).map(([u,w])=>e.jsxs("div",{style:m,children:[e.jsxs("h4",{style:x,children:[u,e.jsx("button",{style:S,onClick:()=>i(t("category",u.toLowerCase().replace(" ","_"))),children:"ver todos"},u)]}),e.jsx("div",{style:h}),e.jsx("div",{style:o,children:Object.keys(w).map(n=>n!=="notShow"&&e.jsx("button",{style:y,onClick:()=>i(t("type",n.toLowerCase().replace(" ","_"))),children:n},n))})]},u)),e.jsxs("div",{style:m,children:[e.jsx("h4",{style:x,children:"Talle"}),e.jsx("div",{style:h}),e.jsx("div",{style:o,children:b.custom.map(u=>e.jsx("button",{style:d,onClick:()=>i(t("size",u)),children:u},u))})]})]})},V=({resetProducts:t,filters:r})=>{const a={position:"relative",backgroundColor:"#f1f1f1",margin:"5px",borderRadius:"6px",display:"flex",justifyContent:"center",alignItems:"center"},i={top:"-8px",left:"0px",padding:"4px 6px",border:"none"};return e.jsx("div",{style:{margin:"10px 25px",padding:"10px",border:"1px solid #f1f1f1",borderRadius:"6px",fontSize:"14px"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("div",{children:"Filtros: "}),e.jsx("div",{className:"d-flex",style:{marginLeft:"6px"},children:Object.entries(r).map(([c,s],l)=>{if(s!=null){let m;return s=="asc"&&(m="precio menor a mayor"),s=="desc"&&(m="precio mayor a menor"),e.jsxs("div",{style:a,children:[e.jsx("div",{style:{padding:"8px 15px"},children:c==="sortByPrice"?m:s}),e.jsx("button",{onClick:()=>t(c),className:"badge bg-dark text-white position-absolute",style:i,children:"x"})]},l)}})}),e.jsx("div",{style:{marginRight:"auto"}})]})})},ee=({setIsLoading:t,table:r})=>{const[a,i]=p.useState({}),[c,s]=p.useState(!1),[l,m]=p.useState(!1),x=O(),h=F(),o=T(),d=1e3,[y,S]=p.useState(!1),[b,u]=p.useState({size:null,table:null,sortByPrice:null,name:null}),w=window.location.href,n=new URL(w),k=()=>S(!1),E=()=>{S(!0),_(),A()};p.useEffect(()=>{const g=new URLSearchParams(h.search);i(g),n.searchParams.get("size")&&(n.searchParams.get("type")=="primaria"||n.searchParams.get("type")=="nivel_incial")&&(n.searchParams.delete("size"),window.location.href=n.toString()),u(j=>({...j,size:n.searchParams.get("size"),type:n.searchParams.get("type"),sortByPrice:n.searchParams.get("sortByPrice"),name:n.searchParams.get("name"),category:n.searchParams.get("category")}))},[h.search]);const D=g=>{k(),o(L({page:1,table:r})),g=="size"&&(u(f=>({...f,size:null})),n.searchParams.delete("size")),g=="type"&&(u(f=>({...f,size:null})),n.searchParams.delete("type")),g=="sortByPrice"&&(u(f=>({...f,sortByPrice:null})),n.searchParams.delete("sortByPrice")),g=="name"&&(u(f=>({...f,name:null})),n.searchParams.delete("name")),g=="category"&&(u(f=>({...f,category:null})),n.searchParams.delete("category"));let j=b;j[g]=null,Object.values(j).every(f=>f===null)&&n.searchParams.append("category","guardapolvo"),window.location.href=n.toString()},I=(g,j)=>(a.set(g,j),`${h.pathname}?${a.toString()}`),M=(g,j)=>(k(),t(!0),o(L({page:1,table:r.replace(" ","_")})),a.set(g,j),setTimeout(async()=>{t(!1)},d),`${h.pathname}?${a.toString()}`),_=()=>{a&&(a.get("type")==="stock"?s(!0):s(!1))},A=()=>{a&&(a.get("type")==="totebag"?m(!0):m(!1))};return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",height:"40px",marginLeft:"10px",marginRight:"10px",marginBottom:"5px",paddingTop:"5px"},children:[e.jsxs(P,{as:$,className:"dropdown-custom",children:[e.jsx(z,{variant:"light",style:{backgroundColor:"#fff",color:"#000",padding:"5px 25px",fontSize:"16px"},children:"Ordenar"}),e.jsx(P.Toggle,{split:!0,variant:"light",id:"dropdown-split-basic",style:{backgroundColor:"#fff",color:"#000",padding:"5px 25px"}}),e.jsxs(P.Menu,{children:[e.jsx(P.Item,{onClick:()=>x(I("sortByPrice","asc")),children:"Precio menor a mayor"}),e.jsx(P.Item,{onClick:()=>x(I("sortByPrice","desc")),children:"Precio mayor a menor"})]})]}),e.jsxs(z,{onClick:E,variant:"light",style:{marginLeft:"auto",backgroundColor:"#fff",color:"#000",padding:"5px 25px",fontSize:"16px"},children:["Filtrar ",e.jsx("i",{className:"bi bi-filter",style:{padding:"5px 5px"}})]}),e.jsxs(C,{show:y,onHide:k,children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Filtrar"})}),e.jsx(C.Body,{children:e.jsx(K,{updateQueryParams:M,isCustom:c,isAccesory:l})})]})]}),Object.values(b).every(g=>g===null)?null:e.jsx(V,{resetProducts:D,filters:b})]})},se=({type:t})=>{const r=O();return e.jsxs(B,{className:"px-3 px-lg-3 my-3 breadcrumb-container",children:[e.jsx(B.Item,{onClick:()=>r("/"),children:"Inicio"}),e.jsxs(B.Item,{active:!0,children:[" ",t," "]})]})},te=()=>{const t=F(),r=v(s=>s.filter.previusSearch.toLowerCase()),a={margin:"200px 0px"},i=`no hay resultados para "${r}"`;return e.jsx("div",{style:a,children:t.pathname.replace("/","")==="busqueda"?i:"no hay resultados que cumplan con tu busqueda..."})},ae=({guardapolvos:t,table:r})=>{const a=v(s=>s.config),[i,c]=p.useState(a!=null?Object.values(a[0].categories).flatMap(s=>Object.keys(s).map(l=>l.toLowerCase())):null);return p.useEffect(()=>{a!=null&&c(Object.values(a[0].categories).flatMap(s=>Object.keys(s)).map(s=>s.toLowerCase()))},[a]),e.jsx("div",{className:"products-container",children:(t==null?void 0:t.length)===0?e.jsx(te,{}):t==null?void 0:t.map((s,l)=>s.show&&(i!=null&&i.includes(s.type))?e.jsx(q,{className:"producto",to:`/products?id=${s.id}`,children:e.jsxs("div",{className:"a-contenedor-productos",children:[(r==="stock"||r==="guardapolvos"||r==="busqueda")&&s.amount===0?e.jsx("div",{className:"badge bg-dark text-white position-absolute tag-stock",children:"Sin Stock"}):null,e.jsx(U,{guardapolvo:s,navigateTo:r,loadGuardapolvos:!0}),e.jsx("div",{className:"contenedor-imgs",children:e.jsxs("div",{className:"contenedor-img-carrito",style:{marginTop:"20px"},children:[e.jsx(R,{src:s.img,alt:s.description.general,className:"section-img-carrito"}),e.jsx(R,{src:s.img2,alt:s.description.general,className:"section-img-carrito-hover",secondImg:!0})]})}),e.jsxs("div",{className:"div-contenedor-detalles",children:[e.jsx("p",{className:"nombreProducto",children:s.name}),e.jsx("div",{className:"d-flex",style:{flexDirection:"column"},children:Q(s)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-decoration-line-through",style:{marginRight:"8px",color:"gray"},children:["$ ",N(s.price)]}),e.jsxs("span",{className:"porcentajeProductoOff",children:[W(s),"% OFF"]})]}),e.jsxs("span",{className:"precioProducto",children:["$",N(s.discountPrice)]})]}):e.jsxs("p",{className:"precioProducto",children:["$ ",N(s.price)]})}),e.jsx("div",{children:(s.table==="stock"||s.table==="accesorios")&&s.amount!==0?e.jsxs("p",{style:{marginLeft:"auto"},children:[s.amount," en stock"]}):null})]})]})},l):"")})},re=({guardapolvos:t})=>{const r=v(o=>o.filter.previusSearch.toLowerCase()),[a]=X(),[i,c]=p.useState({}),s=v(o=>o.config),[l,m]=p.useState(s!=null?Object.values(s[0].categories).flatMap(o=>Object.keys(o).map(d=>d.toLowerCase())):null);p.useEffect(()=>{s!=null&&m(Object.values(s[0].categories).flatMap(o=>Object.keys(o)).map(o=>o.toLowerCase()))},[s]),p.useEffect(()=>{const o={};a.forEach((d,y)=>{o[y]=d}),c(o)},[a]);const x=()=>t.filter(d=>d.show&&(l==null?void 0:l.includes(d.type))).length,h={color:"#777",marginLeft:"10px"};return e.jsx("div",{children:Object.keys(i).includes("name")?e.jsxs("div",{style:h,children:[" ",x()," resultado",x()===1?"":"s",' para "',r,'"']}):e.jsxs("div",{style:h,children:[" ",x()," resultado",x()===1?"":"s"]})})},le=({guardapolvos:t,table:r})=>{const a=T(),[i,c]=p.useState(!1),s=v(d=>d.filter.choosenPage[r.replace(" ","_")]),l=20,m=t==null?void 0:t.length,x=Math.ceil(m/l),h=d=>{a(L({page:d,table:r.replace(" ","_")}))},o=()=>{const d=(s-1)*l,y=d+l;return t==null?void 0:t.slice(d,y)};return e.jsxs("div",{className:"margin-auto width-90",children:[e.jsx(se,{type:r.replace("_"," ")}),e.jsx(ee,{setIsLoading:c,table:r}),e.jsx(re,{guardapolvos:t}),e.jsx(J,{}),i?e.jsx(Y,{}):e.jsxs("div",{children:[e.jsx(ae,{guardapolvos:o(),table:r}),e.jsx(Z,{currentPage:s,totalPages:x,onPageChange:h})]})]})};export{le as default};
