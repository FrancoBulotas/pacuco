import{r as p,b as G,j as e,d as H,a as O,i as P,aw as F,u as T,ax as S,X as z,ay as w,az as L,L as q,aA as U,aB as R,a4 as Q,ai as N,aC as W,aD as X,aE as J,a3 as Y}from"./index-CVe7Vign.js";import{B}from"./breadcrum-DUubAxHv.js";import{P as Z}from"./PaginationProductos-CGnG-Y4Y.js";const $=p.forwardRef(({bsPrefix:t,size:r,vertical:s=!1,className:d,role:u="group",as:o="div",...m},g)=>{const x=G(t,"btn-group");let l=x;return s&&(l=`${x}-vertical`),e.jsx(o,{...m,ref:g,role:u,className:H(d,l,r&&`${x}-${r}`)})});$.displayName="ButtonGroup";const K=({updateQueryParams:t,isCustom:r,isAccesory:s})=>{const d=O(),u=P(i=>i.config),[o,m]=p.useState(u!=null?u[0].categories:null);p.useEffect(()=>{u!=null&&m(u[0].categories)},[u]);const g={border:"1px solid #e0e0e0",padding:"20px",borderRadius:"6px",marginBottom:"5px"},x={padding:"0px",fontSize:"17px"},l={margin:"10px 0px",border:"1px solid #e0e0e0",width:"100%"},n={display:"flex",flexWrap:"wrap"},f={fontSize:"15px",backgroundColor:"#f1f1f1",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"6px",padding:"20px",margin:"6px",width:"60px",height:"20px"},v={fontSize:"15px",backgroundColor:"#f1f1f1",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"6px",padding:"10px",margin:"6px",width:"80px"},b={fontSize:"12px",backgroundColor:"#f1f1f1",border:"none",borderRadius:"6px",padding:"5px",margin:"6px",width:"60px"},c={custom:["00","0","1","2","3","4","5","S","M","L"]};return e.jsxs(e.Fragment,{children:[Object.entries(o).map(([i,C])=>e.jsxs("div",{style:g,children:[e.jsxs("h4",{style:x,children:[i,e.jsx("button",{style:b,onClick:()=>d(t("category",i.toLowerCase().replace(" ","_"))),children:"ver todos"},i)]}),e.jsx("div",{style:l}),e.jsx("div",{style:n,children:Object.keys(C).map(a=>a!=="notShow"&&e.jsx("button",{style:v,onClick:()=>d(t("type",a.toLowerCase().replace(" ","_"))),children:a},a))})]},i)),e.jsxs("div",{style:g,children:[e.jsx("h4",{style:x,children:"Talle"}),e.jsx("div",{style:l}),e.jsx("div",{style:n,children:c.custom.map(i=>e.jsx("button",{style:f,onClick:()=>d(t("size",i)),children:i},i))})]})]})},V=({resetProducts:t,filters:r})=>{const s={position:"relative",backgroundColor:"#f1f1f1",margin:"5px",borderRadius:"6px",display:"flex",justifyContent:"center",alignItems:"center"},d={top:"-8px",left:"0px",padding:"4px 6px",border:"none"};return e.jsx("div",{style:{margin:"10px 25px",padding:"10px",border:"1px solid #f1f1f1",borderRadius:"6px",fontSize:"14px"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("div",{children:"Filtros: "}),e.jsx("div",{className:"d-flex",style:{marginLeft:"6px"},children:Object.entries(r).map(([u,o],m)=>{if(o!=null){let g;return o=="asc"&&(g="precio menor a mayor"),o=="desc"&&(g="precio mayor a menor"),e.jsxs("div",{style:s,children:[e.jsx("div",{style:{padding:"8px 15px"},children:u==="sortByPrice"?g:o}),e.jsx("button",{onClick:()=>t(u),className:"badge bg-dark text-white position-absolute",style:d,children:"x"})]},m)}})}),e.jsx("div",{style:{marginRight:"auto"}})]})})},ee=({setIsLoading:t,table:r})=>{const[s,d]=p.useState({}),[u,o]=p.useState(!1),[m,g]=p.useState(!1),x=O(),l=F(),n=T(),f=1e3,[v,b]=p.useState(!1),[c,i]=p.useState({size:null,table:null,sortByPrice:null,name:null}),C=window.location.href,a=new URL(C),k=()=>b(!1),E=()=>{b(!0),M(),A()};p.useEffect(()=>{const h=new URLSearchParams(l.search);d(h),a.searchParams.get("size")&&(a.searchParams.get("type")=="primaria"||a.searchParams.get("type")=="nivel_incial")&&(a.searchParams.delete("size"),window.location.href=a.toString()),i(y=>({...y,size:a.searchParams.get("size"),type:a.searchParams.get("type"),sortByPrice:a.searchParams.get("sortByPrice"),name:a.searchParams.get("name"),category:a.searchParams.get("category")}))},[l.search]);const _=h=>{k(),n(L({page:1,table:r})),h=="size"&&(i(j=>({...j,size:null})),a.searchParams.delete("size")),h=="type"&&(i(j=>({...j,size:null})),a.searchParams.delete("type")),h=="sortByPrice"&&(i(j=>({...j,sortByPrice:null})),a.searchParams.delete("sortByPrice")),h=="name"&&(i(j=>({...j,name:null})),a.searchParams.delete("name")),h=="category"&&(i(j=>({...j,category:null})),a.searchParams.delete("category"));let y=c;y[h]=null,Object.values(y).every(j=>j===null)&&a.searchParams.append("category","guardapolvo"),window.location.href=a.toString()},I=(h,y)=>(s.set(h,y),`${l.pathname}?${s.toString()}`),D=(h,y)=>(k(),t(!0),n(L({page:1,table:r.replace(" ","_")})),s.set(h,y),setTimeout(async()=>{t(!1)},f),`${l.pathname}?${s.toString()}`),M=()=>{s&&(s.get("type")==="stock"?o(!0):o(!1))},A=()=>{s&&(s.get("type")==="totebag"?g(!0):g(!1))};return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",height:"40px",marginLeft:"10px",marginRight:"10px",marginBottom:"5px",paddingTop:"5px"},children:[e.jsxs(S,{as:$,className:"dropdown-custom",children:[e.jsx(z,{variant:"light",style:{backgroundColor:"#fff",color:"#000",padding:"5px 25px",fontSize:"16px"},children:"Ordenar"}),e.jsx(S.Toggle,{split:!0,variant:"light",id:"dropdown-split-basic",style:{backgroundColor:"#fff",color:"#000",padding:"5px 25px"}}),e.jsxs(S.Menu,{children:[e.jsx(S.Item,{onClick:()=>x(I("sortByPrice","asc")),children:"Precio menor a mayor"}),e.jsx(S.Item,{onClick:()=>x(I("sortByPrice","desc")),children:"Precio mayor a menor"})]})]}),e.jsxs(z,{onClick:E,variant:"light",style:{marginLeft:"auto",backgroundColor:"#fff",color:"#000",padding:"5px 25px",fontSize:"16px"},children:["Filtrar ",e.jsx("i",{className:"bi bi-filter",style:{padding:"5px 5px"}})]}),e.jsxs(w,{show:v,onHide:k,children:[e.jsx(w.Header,{closeButton:!0,children:e.jsx(w.Title,{children:"Filtrar"})}),e.jsx(w.Body,{children:e.jsx(K,{updateQueryParams:D,isCustom:u,isAccesory:m})})]})]}),Object.values(c).every(h=>h===null)?null:e.jsx(V,{resetProducts:_,filters:c})]})},se=({type:t})=>{const r=O();return e.jsxs(B,{className:"px-3 px-lg-3 my-3 breadcrumb-container",children:[e.jsx(B.Item,{onClick:()=>r("/"),children:"Inicio"}),e.jsxs(B.Item,{active:!0,children:[" ",t," "]})]})},te=()=>{const t=F(),r=P(o=>o.filter.previusSearch.toLowerCase()),s={margin:"200px 0px"},d=`no hay resultados para "${r}"`;return e.jsx("div",{style:s,children:t.pathname.replace("/","")==="busqueda"?d:"no hay resultados que cumplan con tu busqueda..."})},ae=({products:t,table:r})=>e.jsx("div",{className:"products-container",children:(t==null?void 0:t.length)===0?e.jsx(te,{}):t==null?void 0:t.map((s,d)=>e.jsx(q,{className:"producto",to:`/products?id=${s.id}`,children:e.jsxs("div",{className:"a-contenedor-productos",children:[(r==="stock"||r==="guardapolvos"||r==="busqueda")&&s.amount===0?e.jsx("div",{className:"badge bg-dark text-white position-absolute tag-stock",children:"Sin Stock"}):null,e.jsx(U,{guardapolvo:s,navigateTo:r,loadGuardapolvos:!0}),e.jsx("div",{className:"contenedor-imgs",children:e.jsxs("div",{className:"contenedor-img-carrito",style:{marginTop:"20px"},children:[e.jsx(R,{src:s.img,alt:s.description.general,className:"section-img-carrito"}),e.jsx(R,{src:s.img2,alt:s.description.general,className:"section-img-carrito-hover",secondImg:!0})]})}),e.jsxs("div",{className:"div-contenedor-detalles",children:[e.jsx("p",{className:"nombreProducto",children:s.name}),e.jsx("div",{className:"d-flex",style:{flexDirection:"column"},children:Q(s)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-decoration-line-through",style:{marginRight:"8px",color:"gray"},children:["$ ",N(s.price)]}),e.jsxs("span",{className:"porcentajeProductoOff",children:[W(s),"% OFF"]})]}),e.jsxs("span",{className:"precioProducto",children:["$",N(s.discountPrice)]})]}):e.jsxs("p",{className:"precioProducto",children:["$ ",N(s.price)]})}),e.jsx("div",{children:(s.table==="stock"||s.table==="accesorios")&&s.amount!==0?e.jsxs("p",{style:{marginLeft:"auto"},children:[s.amount," en stock"]}):null})]})]})},d))}),re=({guardapolvos:t})=>{const r=P(n=>n.filter.previusSearch.toLowerCase()),[s]=X(),[d,u]=p.useState({}),o=P(n=>n.config),[m,g]=p.useState(o!=null?Object.values(o[0].categories).flatMap(n=>Object.keys(n).map(f=>f.toLowerCase())):null);p.useEffect(()=>{o!=null&&g(Object.values(o[0].categories).flatMap(n=>Object.keys(n)).map(n=>n.toLowerCase()))},[o]),p.useEffect(()=>{const n={};s.forEach((f,v)=>{n[v]=f}),u(n)},[s]);const x=()=>t.filter(f=>f.show&&(m==null?void 0:m.includes(f.type.replace("_"," ")))).length,l={color:"#777",marginLeft:"10px"};return e.jsx("div",{children:Object.keys(d).includes("name")?e.jsxs("div",{style:l,children:[" ",x()," resultado",x()===1?"":"s",' para "',r,'"']}):e.jsxs("div",{style:l,children:[" ",x()," resultado",x()===1?"":"s"]})})},le=({guardapolvos:t,table:r})=>{const s=T(),[d,u]=p.useState(!1),o=P(c=>c.filter.choosenPage[r.replace(" ","_")]),m=20,g=t==null?void 0:t.length,x=Math.ceil(g/m),l=P(c=>c.config),[n,f]=p.useState(l!=null?Object.values(l[0].categories).flatMap(c=>Object.keys(c).map(i=>i.toLowerCase())):null);p.useEffect(()=>{l!=null&&f(Object.values(l[0].categories).flatMap(c=>Object.keys(c)).map(c=>c.toLowerCase()))},[l]);const v=c=>{s(L({page:c,table:r.replace(" ","_")}))},b=()=>{const c=(o-1)*m,i=c+m;return(t==null?void 0:t.map(a=>{if(a.show&&(n!=null&&n.includes(a.type.replace("_"," "))))return a}).filter(a=>a!=null)).slice(c,i)};return e.jsxs("div",{className:"margin-auto width-90",children:[e.jsx(se,{type:r.replace("_"," ")}),e.jsx(ee,{setIsLoading:u,table:r}),e.jsx(re,{guardapolvos:t}),e.jsx(J,{}),d?e.jsx(Y,{}):e.jsxs("div",{children:[e.jsx(ae,{products:b(),table:r}),e.jsx(Z,{currentPage:o,totalPages:x,onPageChange:v})]})]})};export{le as default};
