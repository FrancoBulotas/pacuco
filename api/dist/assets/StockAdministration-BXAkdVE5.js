import{j as e,F as a,d as be,e as re,i as ye,r as u,o as Ce,g as we,l as Se,f as Y,h as W,k as ee,m as Ne,n as ke,p as Te,q as Be,t as $,v as z,w as le,x as te,y as Ie,z as ne,A as V,P as Ee,B as Pe,C as Fe,D as De,b as R,a as Q,u as _,E as D,G as Re,S as B,H as oe,I as Z,J as Oe,N as $e,K as se,M as Ae,O as Me,Q as ze,T as Ge,U as Le,V as _e,W as ae,X as M,Y as He,Z as qe,_ as Ue}from"./index-Bd6hEnKQ.js";import{U as O,i as ce,T as Ke,g as Ve,a as We,b as Qe,c as U}from"./Tab-BI88ExOx.js";import{g as G}from"./guardapolvos-B9eLxFp1.js";import{s as L}from"./token-By_1sbaR.js";import{M as I}from"./Modal-BFsVDzNr.js";import{A as Ze}from"./Alert-DTd_NVuw.js";import{P as Je}from"./PaginationProductos-BhDZ77gV.js";const de=({amount:t,size:s,formData:o,handleInputChange:c})=>{const r={display:"flex",justifyContent:"space-around",gap:"5px"},v={width:"50%"};return e.jsxs("div",{style:r,children:[e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput2",style:v,children:[e.jsxs(a.Label,{children:[e.jsxs("strong",{children:["Cantidad",t!==""?":":""," "]}),t]}),e.jsx(a.Control,{type:"text",name:"amount",placeholder:"nueva cantidad",value:o.amount,onChange:c})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput2",style:v,children:[e.jsxs(a.Label,{children:[e.jsxs("strong",{children:["Talle",t!==""?":":""," "]}),s]}),e.jsx(a.Control,{type:"text",name:"size",placeholder:"nuevo talle",value:o.size,onChange:c})]})]})},Xe=()=>{};function Ye(t,s,{disabled:o,clickTrigger:c}={}){const r=s||Xe;be(t,r,{disabled:o,clickTrigger:c});const v=re(b=>{ye(b)&&r(b)});u.useEffect(()=>{if(o||t==null)return;const b=Ce(we(t));let n=(b.defaultView||window).event;const g=Se(b,"keyup",f=>{if(f===n){n=void 0;return}v(f)});return()=>{g()}},[t,o,v])}const ue=u.forwardRef((t,s)=>{const{flip:o,offset:c,placement:r,containerPadding:v,popperConfig:b={},transition:n,runTransition:g}=t,[f,C]=Y(),[w,y]=Y(),d=W(C,s),j=ee(t.container),h=ee(t.target),[i,l]=u.useState(!t.show),m=Ne(h,f,ke({placement:r,enableEvents:!!t.show,containerPadding:v||5,flip:o,offset:c,arrowElement:w,popperConfig:b}));t.show&&i&&l(!1);const x=(...H)=>{l(!0),t.onExited&&t.onExited(...H)},S=t.show||!i;if(Ye(f,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!S)return null;const{onExit:T,onExiting:N,onEnter:k,onEntering:p,onEntered:P}=t;let A=t.children(Object.assign({},m.attributes.popper,{style:m.styles.popper,ref:d}),{popper:m,placement:r,show:!!t.show,arrowProps:Object.assign({},m.attributes.arrow,{style:m.styles.arrow,ref:y})});return A=Te(n,g,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:A,onExit:T,onExiting:N,onExited:x,onEnter:k,onEntering:p,onEntered:P}),j?Be.createPortal(A,j):null});ue.displayName="Overlay";const me=u.forwardRef(({className:t,bsPrefix:s,as:o="div",...c},r)=>(s=$(s,"popover-header"),e.jsx(o,{ref:r,className:z(t,s),...c})));me.displayName="PopoverHeader";const J=u.forwardRef(({className:t,bsPrefix:s,as:o="div",...c},r)=>(s=$(s,"popover-body"),e.jsx(o,{ref:r,className:z(t,s),...c})));J.displayName="PopoverBody";function he(t,s){let o=t;return t==="left"?o=s?"end":"start":t==="right"&&(o=s?"start":"end"),o}function fe(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const et=u.forwardRef(({bsPrefix:t,placement:s="right",className:o,style:c,children:r,body:v,arrowProps:b,hasDoneInitialMeasure:n,popper:g,show:f,...C},w)=>{const y=$(t,"popover"),d=le(),[j]=(s==null?void 0:s.split("-"))||[],h=he(j,d);let i=c;return f&&!n&&(i={...c,...fe(g==null?void 0:g.strategy)}),e.jsxs("div",{ref:w,role:"tooltip",style:i,"x-placement":j,className:z(o,y,j&&`bs-popover-${h}`),...C,children:[e.jsx("div",{className:"popover-arrow",...b}),v?e.jsx(J,{children:r}):r]})}),tt=Object.assign(et,{Header:me,Body:J,POPPER_OFFSET:[0,8]}),xe=u.forwardRef(({bsPrefix:t,placement:s="right",className:o,style:c,children:r,arrowProps:v,hasDoneInitialMeasure:b,popper:n,show:g,...f},C)=>{t=$(t,"tooltip");const w=le(),[y]=(s==null?void 0:s.split("-"))||[],d=he(y,w);let j=c;return g&&!b&&(j={...c,...fe(n==null?void 0:n.strategy)}),e.jsxs("div",{ref:C,style:j,role:"tooltip","x-placement":y,className:z(o,t,`bs-tooltip-${d}`),...f,children:[e.jsx("div",{className:"tooltip-arrow",...v}),e.jsx("div",{className:`${t}-inner`,children:r})]})});xe.displayName="Tooltip";const X=Object.assign(xe,{TOOLTIP_OFFSET:[0,6]});function nt(t){const s=u.useRef(null),o=$(void 0,"popover"),c=$(void 0,"tooltip"),r=u.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(s.current){if(te(s.current,o))return tt.POPPER_OFFSET;if(te(s.current,c))return X.TOOLTIP_OFFSET}return[0,0]}}}),[t,o,c]);return[s,[r]]}function ot(t,s){const{ref:o}=t,{ref:c}=s;t.ref=o.__wrapped||(o.__wrapped=r=>o(V(r))),s.ref=c.__wrapped||(c.__wrapped=r=>c(V(r)))}const ge=u.forwardRef(({children:t,transition:s=ne,popperConfig:o={},rootClose:c=!1,placement:r="top",show:v=!1,...b},n)=>{const g=u.useRef({}),[f,C]=u.useState(null),[w,y]=nt(b.offset),d=W(n,w),j=s===!0?ne:s||void 0,h=re(i=>{C(i),o==null||o.onFirstUpdate==null||o.onFirstUpdate(i)});return Ie(()=>{f&&b.target&&(g.current.scheduleUpdate==null||g.current.scheduleUpdate())},[f,b.target]),u.useEffect(()=>{v||C(null)},[v]),e.jsx(ue,{...b,ref:d,popperConfig:{...o,modifiers:y.concat(o.modifiers||[]),onFirstUpdate:h},transition:j,rootClose:c,placement:r,show:v,children:(i,{arrowProps:l,popper:m,show:x})=>{var S,T;ot(i,l);const N=m==null?void 0:m.placement,k=Object.assign(g.current,{state:m==null?void 0:m.state,scheduleUpdate:m==null?void 0:m.update,placement:N,outOfBoundaries:(m==null||(S=m.state)==null||(T=S.modifiersData.hide)==null?void 0:T.isReferenceHidden)||!1,strategy:o.strategy}),p=!!f;return typeof t=="function"?t({...i,placement:N,show:x,...!s&&x&&{className:"show"},popper:k,arrowProps:l,hasDoneInitialMeasure:p}):u.cloneElement(t,{...i,placement:N,arrowProps:l,popper:k,hasDoneInitialMeasure:p,className:z(t.props.className,!s&&x&&"show"),style:{...t.props.style,...i.style}})}})});ge.displayName="Overlay";function st(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function ie(t,s,o){const[c]=s,r=c.currentTarget,v=c.relatedTarget||c.nativeEvent[o];(!v||v!==r)&&!De(r,v)&&t(...s)}Ee.oneOf(["click","hover","focus"]);const pe=({trigger:t=["hover","focus"],overlay:s,children:o,popperConfig:c={},show:r,defaultShow:v=!1,onToggle:b,delay:n,placement:g,flip:f=g&&g.indexOf("auto")!==-1,...C})=>{const w=u.useRef(null),y=W(w,o.ref),d=Pe(),j=u.useRef(""),[h,i]=Fe(r,v,b),l=st(n),{onFocus:m,onBlur:x,onClick:S}=typeof o!="function"?u.Children.only(o).props:{},T=E=>{y(V(E))},N=u.useCallback(()=>{if(d.clear(),j.current="show",!l.show){i(!0);return}d.set(()=>{j.current==="show"&&i(!0)},l.show)},[l.show,i,d]),k=u.useCallback(()=>{if(d.clear(),j.current="hide",!l.hide){i(!1);return}d.set(()=>{j.current==="hide"&&i(!1)},l.hide)},[l.hide,i,d]),p=u.useCallback((...E)=>{N(),m==null||m(...E)},[N,m]),P=u.useCallback((...E)=>{k(),x==null||x(...E)},[k,x]),A=u.useCallback((...E)=>{i(!h),S==null||S(...E)},[S,i,h]),H=u.useCallback((...E)=>{ie(N,E,"fromElement")},[N]),je=u.useCallback((...E)=>{ie(k,E,"toElement")},[k]),q=t==null?[]:[].concat(t),F={ref:T};return q.indexOf("click")!==-1&&(F.onClick=A),q.indexOf("focus")!==-1&&(F.onFocus=p,F.onBlur=P),q.indexOf("hover")!==-1&&(F.onMouseOver=H,F.onMouseOut=je),e.jsxs(e.Fragment,{children:[typeof o=="function"?o(F):u.cloneElement(o,F),e.jsx(ge,{...C,show:h,onHide:k,flip:f,placement:g,popperConfig:c,target:w.current,children:s})]})},at=t=>{const s=R(i=>i.login),o=Q(),c=_(),r=R(i=>i.guardapolvos.filtred),[v,b]=u.useState([]),[n,g]=u.useState({id:"",name:"",price:"",discountPrice:"",amount:"",size:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},img:"",img2:"",img3:"",featured:""});u.useEffect(()=>{g({...n,description:{...n.description,general:t.item.description?t.item.description.general:""}})},[t.item]);const f=i=>{const{name:l,value:m}=i.target;m.startsWith(" ")||g(l==="base"||l==="general"||l==="detalle"||l==="vivos"||l==="bolsillos"?{...n,description:{...n.description,[l]:m}}:{...n,[l]:m})},C=i=>{const l=i.target.files[0];if(!l)return;const m=i.target.name;m==="imageFront"?g(x=>({...x,img:l.name})):m==="imageBack"?g(x=>({...x,img2:l.name})):m==="imageSizes"&&g(x=>({...x,img3:l.name})),b(x=>[...x,l])},w=async i=>{i.preventDefault();const l=Date.now()+"-"+Math.round(Math.random()*1e9);let m="";if(/prueba[\$0-9]/.test(t.item.name)&&(m="-dev"),!Re(n.price)&&n.price!==""){B.fire({title:"Ingresa un precio valido!",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}const x={id:t.item.id,table:t.item.table,amountToBuy:1,img:n.img!==""?`${O}${m}/${l}-${n.img}`:t.item.img,img2:n.img2!==""?`${O}${m}/${l}-${n.img2}`:t.item.img2,img3:n.img3!==""?`${O}${m}/${l}-${n.img3}`:t.item.img3,name:n.name!==""?n.name:t.item.name,price:n.price!==""?Number(n.price):Number(t.item.price),discountPrice:n.discountPrice!==""?n.discountPrice:t.item.discountPrice,amount:n.amount!==""?n.amount:t.item.amount,size:n.size!==""?n.size:t.item.size,description:{general:n.description.general!==""?n.description.general:t.item.description.general,base:n.description.base!==""?n.description.base:t.item.description.base,detalle:n.description.detalle!==""?n.description.detalle:t.item.description.detalle,vivos:n.description.vivos!==""?n.description.vivos:t.item.description.vivos,bolsillos:n.description.bolsillos!==""?n.description.bolsillos:t.item.description.bolsillos}},S=new FormData;S.append("blobName",l),S.append("containerName","guardapolvos");try{B.fire({title:"Estas segura que queres modificar?",icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async T=>{if(T.isConfirmed){try{const N=L(s.token);await G.update(t.item.id,x,N);const k=r.map(p=>p.id===t.item.id?x:p);c(oe(x.table,k.filter(p=>p.table===x.table))),v.length>0&&(v.forEach(p=>S.append("images",p)),await ce.upload(S,N))}catch(N){if(console.log(N),N.response.status===401)B.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(k=>{if(k.isConfirmed){o("/login");return}});else{B.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}B.fire({title:`${t.item.name} modificado!`,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(()=>{Z(.2),t.onHide()})}})}catch(T){console.error("Error:",T),B.fire({title:"Error",text:"No se pudo modificar el producto",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"})}},y=()=>{B.fire({title:"Estas segura que queres eliminar el guardapolvo?",icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async i=>{if(i.isConfirmed)try{const l=L(s.token);await G.deleteGuardapolvo(t.item.id,l);const m=r.filter(x=>x.id!==t.item.id);c(oe(t.item.table,m.filter(x=>x.table===t.item.table))),B.fire({title:"Guardapolvo eliminado correctamente!",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(x=>{x.isConfirmed&&t.onHide()})}catch(l){console.error("Error:",l),B.fire({title:"Error",text:"No se pudo eliminar el guardapolvo",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}),l.response.data.error==="token expired"&&o("/login")}})},d={display:"flex",justifyContent:"space-around",gap:"5px"},j={width:"50%"},h=i=>e.jsx(X,{id:"button-tooltip",...i,children:"Una vez agregado un descuento, el precio actual se mantiene (aparece tachado), pero el precio que se muestra a los clientes es el del descuento. Para sacar el descuento aplicado, hay que darle un nuevo valor de 0"});return e.jsxs(I,{...t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(I.Header,{closeButton:!0,children:e.jsxs(I.Title,{id:"contained-modal-title-vcenter",children:["Modificar ",t.item.name]})}),e.jsx(I.Body,{children:e.jsxs(a,{onSubmit:w,encType:"multipart/form-data",children:[e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput1",children:[e.jsxs(a.Label,{children:[e.jsx("strong",{children:"Nombre actual:"})," ",t.item.name]}),e.jsx(a.Control,{type:"text",name:"name",placeholder:"nuevo nombre",value:n.name,onChange:f})]}),e.jsxs("div",{style:d,children:[e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput2",style:{width:"50%"},children:[e.jsxs(a.Label,{children:[e.jsx("strong",{children:"Precio actual:"})," $ ",t.item.price]}),e.jsx(a.Control,{type:"text",name:"price",placeholder:"nuevo precio",value:n.price,onChange:f})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput3",style:{width:"50%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(a.Label,{children:[e.jsx("strong",{children:"Descuento actual:"})," $ ",t.item.discountPrice||t.item.discountPrice>0?t.item.discountPrice:"0"]}),e.jsx(pe,{placement:"right",delay:{show:250,hide:400},overlay:h,children:e.jsx("div",{children:e.jsx("i",{className:"bi bi-info-circle",style:{marginRight:"auto",width:"100%"}})})})]}),e.jsx(a.Control,{type:"text",name:"discountPrice",placeholder:"nuevo descuento",value:n.discountPrice,onChange:f})]})]}),t.table==="stock"?e.jsx(de,{amount:t.item.amount,size:t.item.size,formData:n,handleInputChange:f}):null,e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Descripcion actual:"})}),e.jsxs("div",{style:d,children:[e.jsxs("div",{style:j,children:[e.jsx("strong",{children:"Base:"})," ",t.item.description!==void 0?t.item.description.base:null,e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nueva base",name:"base",onChange:f,value:n.description.base})]}),e.jsxs("div",{style:j,children:[e.jsx("strong",{children:"Detalle:"})," ",t.item.description!==void 0?t.item.description.detalle:null,e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo detalle",name:"detalle",onChange:f,value:n.description.detalle})]})]}),e.jsxs("div",{style:d,children:[e.jsxs("div",{style:j,children:[e.jsx("strong",{children:"Vivos:"})," ",t.item.description?t.item.description.vivos:null,e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo vivo",name:"vivos",onChange:f,value:n.description.vivos})]}),e.jsxs("div",{style:j,children:[e.jsx("strong",{children:"Bolsillos:"})," ",t.item.description?t.item.description.bolsillos:null,e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo bolsillos",name:"bolsillos",onChange:f,value:n.description.bolsillos})]})]}),e.jsx(a.Control,{as:"textarea",placeholder:"nueva descripcion",name:"general",onChange:f,value:n.description.general,rows:4})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Imagen Frente"})}),e.jsx(a.Control,{type:"file",name:"imageFront",onChange:C})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Imagen Dorso"})}),e.jsx(a.Control,{type:"file",name:"imageBack",onChange:C})]}),t.table==="stock"?e.jsxs(a.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Imagen Talles"})}),e.jsx(a.Control,{type:"file",name:"imageSizes",onChange:C})]}):null]})}),e.jsxs(I.Footer,{children:[e.jsx(D,{variant:"danger",onClick:y,style:{marginRight:"auto"},children:"Eliminar guardapolvo"}),e.jsx(D,{variant:"secondary",onClick:t.onHide,children:"Cerrar"}),e.jsx(D,{variant:"dark",onClick:w,children:"Guardar Cambios"})]})]})},it=t=>{R(y=>y.guardapolvos.guardapolvos),_();const s=Q(),o=R(y=>y.login),[c,r]=u.useState({display:"none",text:""}),[v,b]=u.useState([]),[n,g]=u.useState({name:"",price:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},amount:"",amountToBuy:1,size:"",table:t.table,img:"",img2:"",img3:"",imgs:[]}),f=y=>{const{name:d,value:j}=y.target;g(d==="base"||d==="general"||d==="detalle"||d==="vivos"||d==="bolsillos"?{...n,description:{...n.description,[d]:j}}:{...n,[d]:j})},C=y=>{const d=y.target.files[0];if(!d)return;const j=y.target.name;j==="imageFront"?g(h=>({...h,img:d.name})):j==="imageBack"?g(h=>({...h,img2:d.name})):j==="imageSizes"&&g(h=>({...h,img3:d.name})),b(h=>[...h,d]),g(h=>({...h,imgs:[...n.imgs,d.name]}))},w=async y=>{y.preventDefault();const d=Date.now()+"-"+Math.round(Math.random()*1e9);if(n.name===""){r({display:"block",text:"Ingresar nombre"});return}else if(n.price===""){r({display:"block",text:"Ingresar precio"});return}else if(n.description.general===""){r({display:"block",text:"Ingresar descripcion"});return}else if(n.img===""){r({display:"block",text:"Ingresar imagen frente"});return}else if(n.img2===""){r({display:"block",text:"Ingresar dorso"});return}if(t.table==="stock"){if(n.amount===""){r({display:"block",text:"Ingresar cantidad"});return}else if(n.size===""){r({display:"block",text:"Ingresar talle"});return}}r({display:"none",text:""});let j="";/prueba[\$0-9]/.test(n.name)&&(j="-dev");const h=n;h.img=`${O}${j}/${d}-${n.img}`,h.img2=`${O}${j}/${d}-${n.img2}`,h.img3=n.img3!==""?`${O}${j}/${d}-${n.img3}`:void 0,h.table=t.table,h.discountPrice=void 0;const i=new FormData;i.append("blobName",d),i.append("containerName","guardapolvos");try{B.fire({title:`Estas segura que queres agregar ${n.name}?`,icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async l=>{if(l.isConfirmed){try{const m=L(o.token);await G.create(n,m),v.forEach(x=>{i.append("images",x)}),await ce.upload(i,m)}catch(m){if(console.error(m),m.response.status===401)B.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(x=>{x.isConfirmed&&s("/login")});else{B.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}B.fire({title:`${n.name} agregado!`,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(()=>{Z(.5),t.onHide()})}})}catch(l){console.error("Error:",l)}};return e.jsxs(I,{...t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(I.Header,{closeButton:!0,children:e.jsx(I.Title,{id:"contained-modal-title-vcenter",children:"Agregar nuevo guardapolvo"})}),e.jsx(Ze,{variant:"danger",style:{display:`${c.display}`},children:c.text},"danger"),e.jsx(I.Body,{children:e.jsxs(a,{onSubmit:w,encType:"multipart/form-data",children:[e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput1",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Nombre"})}),e.jsx(a.Control,{type:"text",name:"name",placeholder:"nuevo nombre",value:n.name,onChange:f})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"controlInput2",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Precio"})}),e.jsx(a.Control,{type:"text",name:"price",placeholder:"nuevo precio",value:n.price,onChange:f})]}),t.table==="stock"?e.jsx(de,{amount:"",size:"",formData:n,handleInputChange:f}):null,e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Descripcion"})}),e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nueva base",name:"base",onChange:f,value:n.description.base}),e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo detalle",name:"detalle",onChange:f,value:n.description.detalle}),e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo vivo",name:"vivos",onChange:f,value:n.description.vivos}),e.jsx(a.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo bolsillos",name:"bolsillos",onChange:f,value:n.description.bolsillos}),e.jsx(a.Control,{as:"textarea",placeholder:"nueva descripcion general",name:"general",onChange:f,value:n.description.general,rows:3})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Imagen Frente"})}),e.jsx(a.Control,{type:"file",name:"imageFront",onChange:C})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Imagen Dorso"})}),e.jsx(a.Control,{type:"file",name:"imageBack",onChange:C})]}),t.table==="stock"?e.jsxs(a.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(a.Label,{children:e.jsx("strong",{children:"Imagen Talles"})}),e.jsx(a.Control,{type:"file",name:"imageSizes",onChange:C})]}):null]})}),e.jsxs(I.Footer,{children:[e.jsx(D,{variant:"secondary",onClick:t.onHide,children:"Cerrar"}),e.jsx(D,{variant:"dark",onClick:w,children:"Guardar Cambios"})]})]})};function rt(t){let s;return Ae(t,o=>{s==null&&(s=o.props.eventKey)}),s}function lt(t){const{title:s,eventKey:o,disabled:c,tabClassName:r,tabAttrs:v,id:b}=t.props;return s==null?null:e.jsx(Me,{as:"li",role:"presentation",children:e.jsx(ze,{as:"button",type:"button",eventKey:o,disabled:c,id:b,className:r,...v,children:s})})}const ve=t=>{const{id:s,onSelect:o,transition:c,mountOnEnter:r=!1,unmountOnExit:v=!1,variant:b="tabs",children:n,activeKey:g=rt(n),...f}=Oe(t,{activeKey:"onSelect"});return e.jsxs(Ke,{id:s,activeKey:g,onSelect:o,transition:Ve(c),mountOnEnter:r,unmountOnExit:v,children:[e.jsx($e,{id:s,...f,role:"tablist",as:"ul",variant:b,children:se(n,lt)}),e.jsx(We,{children:se(n,C=>{const w={...C.props};return delete w.title,delete w.disabled,delete w.tabClassName,delete w.tabAttrs,e.jsx(Qe,{...w})})})]})};ve.displayName="Tabs";const K=({title:t,table:s,guardapolvosList:o,showCreateModal:c,showEditModal:r})=>{var k;const[v,b]=u.useState(!1),[n,g]=u.useState(o);u.useEffect(()=>{g(o)},[o]);const f=R(p=>p.filter.search.toLowerCase()),C=_(),[w,y]=u.useState(1),d=6,j=n.length,h=Math.ceil(j/d),i=p=>{y(p)},l=()=>{const p=(w-1)*d,P=p+d;if(n.length>0)return n.slice(p,P)},m=async()=>{if(b(!0),f!==""){y(1);const p=await M.getSearch({table:s,name:f});g(p)}else x();setTimeout(()=>{b(!1)},1e3)},x=()=>{C(He("")),g(o)},S=p=>{B.fire({imageUrl:p,showConfirmButton:!1})},T={margin:"0px",fontSize:"16px",background:"inherit",border:"none"},N={marginRight:"5px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",backgroundColor:"#f3f3f3",padding:"4px",borderRadius:"6px"};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex w-100",children:[e.jsx("h4",{className:"label-titulos",children:t}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex"},children:[n.length!==o.length?e.jsx("div",{onClick:()=>x(),style:N,children:"reiniciar"}):null,e.jsx("div",{children:e.jsx(Ge,{displaySearch:m,filtrateSearch:null})}),e.jsx("button",{onClick:()=>c(s),style:T,children:e.jsx(Le,{width:"20",height:"20"})})]})]}),v?e.jsx(_e,{}):e.jsxs("div",{className:"tabla-container",children:[e.jsxs("table",{className:"tabla-de-productoss",children:[e.jsx("thead",{children:s==="stock"?e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Talle"}),e.jsx("th",{children:"Frente"}),e.jsx("th",{children:"Dorso"}),e.jsx("th",{style:{width:"50px"},children:"Descuento"}),e.jsx("th",{})]}):e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Frente"}),e.jsx("th",{children:"Dorso"}),e.jsx("th",{style:{width:"50px"},children:"Descuento"}),e.jsx("th",{children:"Editar"})]})}),(k=l())==null?void 0:k.map((p,P)=>e.jsx("tbody",{children:e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("td",{children:p.name}),e.jsxs("td",{children:["$ ",ae(p)?p.discountPrice:p.price]}),s==="stock"?e.jsx("td",{children:p.amount}):"",s==="stock"?e.jsx("td",{children:p.size}):"",e.jsx("td",{children:e.jsx("img",{src:p.img,onClick:()=>S(p.img),alt:p.description.general,className:"small-img-admin",style:{cursor:"pointer"}})}),e.jsx("td",{children:e.jsx("img",{src:p.img2,onClick:()=>S(p.img2),alt:p.description.general,className:"small-img-admin",style:{cursor:"pointer"}})}),e.jsx("td",{children:ae(p)?e.jsx("i",{className:"bi bi-check-lg",style:{color:"green"}}):e.jsx("i",{className:"bi bi-x-lg",style:{color:"red"}})}),e.jsx("td",{onClick:()=>r(p,s),style:{cursor:"pointer"},children:e.jsx("i",{className:"bi bi-pencil-square"})})]})},P))]}),e.jsx(Je,{currentPage:w,totalPages:h,onPageChange:i})]})]})},ct=({show:t,onHide:s,guardapolvosList:o})=>{const c=R(h=>h.login),r=Q(),[v,b]=u.useState("guardapolvos"),[n,g]=u.useState(0),[f,C]=u.useState(o);u.useEffect(()=>{v==="nivel_inicial"&&C(o.nivelInicial),v==="primaria"&&C(o.primaria),v==="stock"&&C(o.stock),v==="guardapolvos"&&C(o.all)},[v,o]);const w=h=>{b(h.target.value)},y=h=>{const i=h.target.value/100;g(i)},d=async(h,i)=>{try{const l=L(c.token);B.fire({title:`Estas segura que queres modificar en un ${h*100}% el precio de los guardapolvos?`,icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async m=>{if(m.isConfirmed)try{if((await G.changePriceByPorcentage({porcent:h,guardapolvos:i},l)).ok){Z(.4);return}else throw new Error("Error al intentar modificar el precio.")}catch(x){if(console.log(x),x.response.status===401)B.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(S=>{if(S.isConfirmed){r("/login");return}});else{B.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}})}catch(l){console.error(l),B.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"})}},j=h=>e.jsx(X,{id:"button-tooltip",...h,children:"Si queremos bajar el precio, lo unico que hay que hacer es poner el numero en negativo. Ejemplo: Queremos bajar un 10%, ponemos -10%."});return e.jsxs(I,{show:t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(I.Header,{closeButton:!0,children:e.jsx(I.Title,{id:"contained-modal-title-vcenter",children:"Administrar todos los productos"})}),e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex",style:{fontSize:"16px",height:"40px",alignItems:"center"},children:[e.jsx("p",{style:{margin:"0px"},children:"Cambiar el precio a: "}),e.jsxs("select",{name:"",onChange:w,style:{marginLeft:"5px",border:"none",cursor:"pointer",outline:"none",boxShadow:"none"},children:[e.jsx("option",{value:"guardapolvos",children:"Todos"}),e.jsx("option",{value:"nivel_inicial",children:"Nivel Inicial"}),e.jsx("option",{value:"primaria",children:"Primaria"}),e.jsx("option",{value:"stock",children:"Stock"})]})]}),e.jsxs("div",{className:"d-flex",style:{fontSize:"16px",height:"40px",alignItems:"center"},children:[e.jsx("p",{style:{margin:"0px"},children:"En un: "}),e.jsx("input",{type:"text",onChange:y,style:{width:"40px",outline:"none",boxShadow:"none",border:"1px solid #e2e2e2",marginLeft:"4px"}}),e.jsx("p",{style:{margin:"0px",marginRight:"20px"},children:"%"}),e.jsx(pe,{placement:"right",delay:{show:250,hide:400},overlay:j,children:e.jsx("div",{children:e.jsx("i",{className:"bi bi-info-circle",style:{marginRight:"auto",width:"100%"}})})})]})]}),e.jsxs(I.Footer,{children:[e.jsx(D,{variant:"secondary",onClick:s,children:"Cerrar"}),e.jsx(D,{className:"btn btn-dark",onClick:()=>d(n,f),children:"Aplicar cambios"})]})]})},pt=()=>{const[t,s]=u.useState({all:[],nivelInicial:[],primaria:[],stock:[]}),[o]=qe(),c=R(S=>S.administration.tabChoosen),r=_(),[v,b]=u.useState(!1),[n,g]=u.useState(!1),[f,C]=u.useState(!1),[w,y]=u.useState(""),[d,j]=u.useState({});u.useEffect(()=>{(async()=>{if(o&&o.size==0)try{const T=await M.getSearch({all:!0}),N=await M.getSearch({table:"nivel_inicial"}),k=await M.getSearch({table:"primaria"}),p=await M.getSearch({table:"stock"});s({all:T,nivelInicial:N,primaria:k,stock:p})}catch(T){console.error(T.message)}})()},[o]);const h=(S,T)=>{g(!0),y(T),j(S)},i=S=>{y(S),b(!0)},l=()=>{C(!0)},m=S=>{r(Ue(S))},x={width:"100%"};return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:"contenedor-tablas-productos",children:[e.jsx("div",{className:"d-flex w-100 mb-5",onClick:()=>l(),children:e.jsxs("div",{className:"card",style:{cursor:"pointer"},children:[e.jsx("div",{className:"card-body",children:"Administrar todos los productos"}),e.jsxs("div",{className:"card-footer d-flex align-items-center justify-content-between",children:[e.jsx("div",{className:"small text-black stretched-link",children:"Ver detalles"}),e.jsx("div",{className:"small text-black",children:e.jsx("i",{className:"fas fa-angle-right"})})]})]})}),e.jsx("div",{style:{width:"100%",backgroundColor:"#fff",padding:"10px"},className:"tabs-container",children:e.jsxs(ve,{defaultActiveKey:c,id:"uncontrolled-tab-example",className:"mb-3",fill:!0,onSelect:m,children:[e.jsx(U,{eventKey:"nivel_inicial",title:"Nivel Inicial",style:x,children:e.jsx(K,{title:"NIVEL INICIAL",table:"nivel_inicial",guardapolvosList:t.nivelInicial,showCreateModal:i,showEditModal:h})}),e.jsx(U,{eventKey:"primaria",title:"Primaria",style:x,children:e.jsx(K,{title:"PRIMARIA",table:"primaria",guardapolvosList:t.primaria,showCreateModal:i,showEditModal:h})}),e.jsx(U,{eventKey:"stock",title:"Stock",style:x,children:e.jsx(K,{title:"STOCK",table:"stock",guardapolvosList:t.stock,showCreateModal:i,showEditModal:h})})]})}),e.jsx(at,{item:d,show:n,table:w,onHide:()=>g(!1)}),e.jsx(it,{show:v,table:w,onHide:()=>b(!1)}),e.jsx(ct,{show:f,onHide:()=>C(!1),guardapolvosList:t})]})})})};export{pt as default};
