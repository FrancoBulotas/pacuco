import{l as ye,m as ie,n as je,r as u,o as be,p as Ce,q as we,t as X,v as V,w as Y,x as Se,y as Te,z as Ne,A as ke,b as $,j as e,d as L,B as re,D as ee,E as Ie,F as te,G as K,P as Be,H as Ee,I as Pe,J as Fe,K as Oe,N as Re,M as ne,O as De,Q as Ae,T as $e,U as s,i as M,a as W,u as Q,V as R,W as Me,S as k,X as oe,Y as ze,Z as Le,_ as Ge,$ as ae,a0 as D,a1 as _e,a2 as He,a3 as qe,a4 as Ue}from"./index-KpJSGDIf.js";import{T as Ke,g as Ve,a as We,b as Qe,U as A,i as le,c as G}from"./consts-CZ8u873x.js";import{g as H}from"./guardapolvos-Dp7u37e9.js";import{s as q}from"./token-By_1sbaR.js";import{M as I}from"./Modal-4jMg5lSt.js";import{A as Ze}from"./Alert-wn2sqWsI.js";import{P as Je}from"./PaginationProductos-DkWkPhQt.js";const Xe=()=>{};function Ye(t,a,{disabled:o,clickTrigger:d}={}){const i=a||Xe;ye(t,i,{disabled:o,clickTrigger:d});const v=ie(j=>{je(j)&&i(j)});u.useEffect(()=>{if(o||t==null)return;const j=be(Ce(t));let n=(j.defaultView||window).event;const p=we(j,"keyup",h=>{if(h===n){n=void 0;return}v(h)});return()=>{p()}},[t,o,v])}const ce=u.forwardRef((t,a)=>{const{flip:o,offset:d,placement:i,containerPadding:v,popperConfig:j={},transition:n,runTransition:p}=t,[h,b]=X(),[C,w]=X(),m=V(b,a),y=Y(t.container),x=Y(t.target),[l,r]=u.useState(!t.show),c=Se(x,h,Te({placement:i,enableEvents:!!t.show,containerPadding:v||5,flip:o,offset:d,arrowElement:C,popperConfig:j}));t.show&&l&&r(!1);const f=(...z)=>{r(!0),t.onExited&&t.onExited(...z)},N=t.show||!l;if(Ye(h,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!N)return null;const{onExit:B,onExiting:T,onEnter:S,onEntering:g,onEntered:P}=t;let F=t.children(Object.assign({},c.attributes.popper,{style:c.styles.popper,ref:m}),{popper:c,placement:i,show:!!t.show,arrowProps:Object.assign({},c.attributes.arrow,{style:c.styles.arrow,ref:w})});return F=Ne(n,p,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:F,onExit:B,onExiting:T,onExited:f,onEnter:S,onEntering:g,onEntered:P}),y?ke.createPortal(F,y):null});ce.displayName="Overlay";const de=u.forwardRef(({className:t,bsPrefix:a,as:o="div",...d},i)=>(a=$(a,"popover-header"),e.jsx(o,{ref:i,className:L(t,a),...d})));de.displayName="PopoverHeader";const Z=u.forwardRef(({className:t,bsPrefix:a,as:o="div",...d},i)=>(a=$(a,"popover-body"),e.jsx(o,{ref:i,className:L(t,a),...d})));Z.displayName="PopoverBody";function ue(t,a){let o=t;return t==="left"?o=a?"end":"start":t==="right"&&(o=a?"start":"end"),o}function me(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const et=u.forwardRef(({bsPrefix:t,placement:a="right",className:o,style:d,children:i,body:v,arrowProps:j,hasDoneInitialMeasure:n,popper:p,show:h,...b},C)=>{const w=$(t,"popover"),m=re(),[y]=(a==null?void 0:a.split("-"))||[],x=ue(y,m);let l=d;return h&&!n&&(l={...d,...me(p==null?void 0:p.strategy)}),e.jsxs("div",{ref:C,role:"tooltip",style:l,"x-placement":y,className:L(o,w,y&&`bs-popover-${x}`),...b,children:[e.jsx("div",{className:"popover-arrow",...j}),v?e.jsx(Z,{children:i}):i]})}),tt=Object.assign(et,{Header:de,Body:Z,POPPER_OFFSET:[0,8]}),he=u.forwardRef(({bsPrefix:t,placement:a="right",className:o,style:d,children:i,arrowProps:v,hasDoneInitialMeasure:j,popper:n,show:p,...h},b)=>{t=$(t,"tooltip");const C=re(),[w]=(a==null?void 0:a.split("-"))||[],m=ue(w,C);let y=d;return p&&!j&&(y={...d,...me(n==null?void 0:n.strategy)}),e.jsxs("div",{ref:b,style:y,role:"tooltip","x-placement":w,className:L(o,t,`bs-tooltip-${m}`),...h,children:[e.jsx("div",{className:"tooltip-arrow",...v}),e.jsx("div",{className:`${t}-inner`,children:i})]})});he.displayName="Tooltip";const J=Object.assign(he,{TOOLTIP_OFFSET:[0,6]});function nt(t){const a=u.useRef(null),o=$(void 0,"popover"),d=$(void 0,"tooltip"),i=u.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(a.current){if(ee(a.current,o))return tt.POPPER_OFFSET;if(ee(a.current,d))return J.TOOLTIP_OFFSET}return[0,0]}}}),[t,o,d]);return[a,[i]]}function ot(t,a){const{ref:o}=t,{ref:d}=a;t.ref=o.__wrapped||(o.__wrapped=i=>o(K(i))),a.ref=d.__wrapped||(d.__wrapped=i=>d(K(i)))}const ge=u.forwardRef(({children:t,transition:a=te,popperConfig:o={},rootClose:d=!1,placement:i="top",show:v=!1,...j},n)=>{const p=u.useRef({}),[h,b]=u.useState(null),[C,w]=nt(j.offset),m=V(n,C),y=a===!0?te:a||void 0,x=ie(l=>{b(l),o==null||o.onFirstUpdate==null||o.onFirstUpdate(l)});return Ie(()=>{h&&j.target&&(p.current.scheduleUpdate==null||p.current.scheduleUpdate())},[h,j.target]),u.useEffect(()=>{v||b(null)},[v]),e.jsx(ce,{...j,ref:m,popperConfig:{...o,modifiers:w.concat(o.modifiers||[]),onFirstUpdate:x},transition:y,rootClose:d,placement:i,show:v,children:(l,{arrowProps:r,popper:c,show:f})=>{var N,B;ot(l,r);const T=c==null?void 0:c.placement,S=Object.assign(p.current,{state:c==null?void 0:c.state,scheduleUpdate:c==null?void 0:c.update,placement:T,outOfBoundaries:(c==null||(N=c.state)==null||(B=N.modifiersData.hide)==null?void 0:B.isReferenceHidden)||!1,strategy:o.strategy}),g=!!h;return typeof t=="function"?t({...l,placement:T,show:f,...!a&&f&&{className:"show"},popper:S,arrowProps:r,hasDoneInitialMeasure:g}):u.cloneElement(t,{...l,placement:T,arrowProps:r,popper:S,hasDoneInitialMeasure:g,className:L(t.props.className,!a&&f&&"show"),style:{...t.props.style,...l.style}})}})});ge.displayName="Overlay";function at(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function se(t,a,o){const[d]=a,i=d.currentTarget,v=d.relatedTarget||d.nativeEvent[o];(!v||v!==i)&&!Fe(i,v)&&t(...a)}Be.oneOf(["click","hover","focus"]);const xe=({trigger:t=["hover","focus"],overlay:a,children:o,popperConfig:d={},show:i,defaultShow:v=!1,onToggle:j,delay:n,placement:p,flip:h=p&&p.indexOf("auto")!==-1,...b})=>{const C=u.useRef(null),w=V(C,o.ref),m=Ee(),y=u.useRef(""),[x,l]=Pe(i,v,j),r=at(n),{onFocus:c,onBlur:f,onClick:N}=typeof o!="function"?u.Children.only(o).props:{},B=E=>{w(K(E))},T=u.useCallback(()=>{if(m.clear(),y.current="show",!r.show){l(!0);return}m.set(()=>{y.current==="show"&&l(!0)},r.show)},[r.show,l,m]),S=u.useCallback(()=>{if(m.clear(),y.current="hide",!r.hide){l(!1);return}m.set(()=>{y.current==="hide"&&l(!1)},r.hide)},[r.hide,l,m]),g=u.useCallback((...E)=>{T(),c==null||c(...E)},[T,c]),P=u.useCallback((...E)=>{S(),f==null||f(...E)},[S,f]),F=u.useCallback((...E)=>{l(!x),N==null||N(...E)},[N,l,x]),z=u.useCallback((...E)=>{se(T,E,"fromElement")},[T]),ve=u.useCallback((...E)=>{se(S,E,"toElement")},[S]),U=t==null?[]:[].concat(t),O={ref:B};return U.indexOf("click")!==-1&&(O.onClick=F),U.indexOf("focus")!==-1&&(O.onFocus=g,O.onBlur=P),U.indexOf("hover")!==-1&&(O.onMouseOver=z,O.onMouseOut=ve),e.jsxs(e.Fragment,{children:[typeof o=="function"?o(O):u.cloneElement(o,O),e.jsx(ge,{...b,show:x,onHide:S,flip:h,placement:p,popperConfig:d,target:C.current,children:a})]})};function st(t){let a;return De(t,o=>{a==null&&(a=o.props.eventKey)}),a}function it(t){const{title:a,eventKey:o,disabled:d,tabClassName:i,tabAttrs:v,id:j}=t.props;return a==null?null:e.jsx(Ae,{as:"li",role:"presentation",children:e.jsx($e,{as:"button",type:"button",eventKey:o,disabled:d,id:j,className:i,...v,children:a})})}const fe=t=>{const{id:a,onSelect:o,transition:d,mountOnEnter:i=!1,unmountOnExit:v=!1,variant:j="tabs",children:n,activeKey:p=st(n),...h}=Oe(t,{activeKey:"onSelect"});return e.jsxs(Ke,{id:a,activeKey:p,onSelect:o,transition:Ve(d),mountOnEnter:i,unmountOnExit:v,children:[e.jsx(Re,{id:a,...h,role:"tablist",as:"ul",variant:j,children:ne(n,it)}),e.jsx(We,{children:ne(n,b=>{const C={...b.props};return delete C.title,delete C.disabled,delete C.tabClassName,delete C.tabAttrs,e.jsx(Qe,{...C})})})]})};fe.displayName="Tabs";const pe=({amount:t,size:a,formData:o,handleInputChange:d})=>{const i={display:"flex",justifyContent:"space-around",gap:"5px"},v={width:"50%"};return e.jsxs("div",{style:i,children:[e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput2",style:v,children:[e.jsxs(s.Label,{children:[e.jsxs("strong",{children:["Cantidad",t!==""?":":""," "]}),t]}),e.jsx(s.Control,{type:"text",name:"amount",placeholder:"nueva cantidad",value:o.amount,onChange:d})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput2",style:v,children:[e.jsxs(s.Label,{children:[e.jsxs("strong",{children:["Talle",t!==""?":":""," "]}),a]}),e.jsx(s.Control,{type:"text",name:"size",placeholder:"nuevo talle",value:o.size,onChange:d})]})]})},rt=t=>{const a=M(l=>l.login),o=W(),d=Q(),i=M(l=>l.guardapolvos.filtred),[v,j]=u.useState([]),[n,p]=u.useState({id:"",name:"",price:"",type:"",category:"",discountPrice:"",amount:"",size:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},img:"",img2:"",img3:"",featured:""});u.useEffect(()=>{p({...n,description:{...n.description,general:t.item.description?t.item.description.general:""}})},[t.item]);const h=l=>{const{name:r,value:c}=l.target;c.startsWith(" ")||p(r==="base"||r==="general"||r==="detalle"||r==="vivos"||r==="bolsillos"?{...n,description:{...n.description,[r]:c}}:{...n,[r]:c})},b=l=>{const r=l.target.files[0];if(!r)return;const c=l.target.name;c==="imageFront"?p(f=>({...f,img:r.name})):c==="imageBack"?p(f=>({...f,img2:r.name})):c==="imageSizes"&&p(f=>({...f,img3:r.name})),j(f=>[...f,r])},C=async l=>{l.preventDefault();const r=Date.now()+"-"+Math.round(Math.random()*1e9);let c="";if(/prueba[\$0-9]/.test(t.item.name)&&(c="-dev"),!Me(n.price)&&n.price!==""){k.fire({title:"Ingresa un precio valido!",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}const f={id:t.item.id,table:t.item.table,amountToBuy:1,img:n.img!==""?`${A}${c}/${r}-${n.img}`:t.item.img,img2:n.img2!==""?`${A}${c}/${r}-${n.img2}`:t.item.img2,img3:n.img3!==""?`${A}${c}/${r}-${n.img3}`:t.item.img3,name:n.name!==""?n.name:t.item.name,price:n.price!==""?Number(n.price):Number(t.item.price),discountPrice:n.discountPrice!==""?n.discountPrice:t.item.discountPrice,amount:n.amount!==""?n.amount:t.item.amount,size:n.size!==""?n.size:t.item.size,type:n.type!==""?n.type:t.item.type,category:n.category!==""?n.category:t.item.category,description:{general:n.description.general!==""?n.description.general:t.item.description.general,base:n.description.base!==""?n.description.base:t.item.description.base,detalle:n.description.detalle!==""?n.description.detalle:t.item.description.detalle,vivos:n.description.vivos!==""?n.description.vivos:t.item.description.vivos,bolsillos:n.description.bolsillos!==""?n.description.bolsillos:t.item.description.bolsillos}},N=new FormData;N.append("blobName",r),N.append("containerName","guardapolvos");try{k.fire({title:"Estas segura que queres modificar?",icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async B=>{if(B.isConfirmed){try{const T=q(a.token);await H.update(t.item.id,f,T);const S=i.map(g=>g.id===t.item.id?f:g);d(oe(f.table,S.filter(g=>g.table===f.table))),v.length>0&&(v.forEach(g=>N.append("images",g)),await le.upload(N,T))}catch(T){if(console.log(T),T.response.status===401)k.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(S=>{if(S.isConfirmed){o("/login");return}});else{k.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}k.fire({title:`${t.item.name} modificado!`,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(()=>{t.initializeProducts(),t.onHide(),p({id:"",name:"",price:"",type:"",category:"",discountPrice:"",amount:"",size:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},img:"",img2:"",img3:"",featured:""})})}})}catch(B){console.error("Error:",B),k.fire({title:"Error",text:"No se pudo modificar el producto",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"})}},w=()=>{k.fire({title:"Estas segura que queres eliminar el guardapolvo?",icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async l=>{if(l.isConfirmed)try{const r=q(a.token);await H.deleteGuardapolvo(t.item.id,r);const c=i.filter(f=>f.id!==t.item.id);d(oe(t.item.table,c.filter(f=>f.table===t.item.table))),k.fire({title:"Guardapolvo eliminado correctamente!",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(f=>{f.isConfirmed&&t.onHide()})}catch(r){console.error("Error:",r),k.fire({title:"Error",text:"No se pudo eliminar el guardapolvo",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}),r.response.data.error==="token expired"&&o("/login")}})},m={display:"flex",justifyContent:"space-around",gap:"5px"},y={width:"50%"},x=l=>e.jsx(J,{id:"button-tooltip",...l,children:"Una vez agregado un descuento, el precio actual se mantiene (aparece tachado), pero el precio que se muestra a los clientes es el del descuento. Para sacar el descuento aplicado, hay que darle un nuevo valor de 0"});return e.jsxs(I,{...t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(I.Header,{closeButton:!0,children:e.jsxs(I.Title,{id:"contained-modal-title-vcenter",children:["Modificar ",t.item.name]})}),e.jsx(I.Body,{children:e.jsxs(s,{onSubmit:C,encType:"multipart/form-data",children:[e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput1",children:[e.jsxs(s.Label,{children:[e.jsx("strong",{children:"Nombre actual:"})," ",t.item.name]}),e.jsx(s.Control,{type:"text",name:"name",placeholder:"nuevo nombre",value:n.name,onChange:h})]}),e.jsxs("div",{style:m,children:[e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput2",style:{width:"50%"},children:[e.jsxs(s.Label,{children:[e.jsx("strong",{children:"Precio actual:"})," $ ",t.item.price]}),e.jsx(s.Control,{type:"text",name:"price",placeholder:"nuevo precio",value:n.price,onChange:h})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput3",style:{width:"50%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(s.Label,{children:[e.jsx("strong",{children:"Descuento actual:"})," $ ",t.item.discountPrice||t.item.discountPrice>0?t.item.discountPrice:"0"]}),e.jsx(xe,{placement:"right",delay:{show:250,hide:400},overlay:x,children:e.jsx("div",{children:e.jsx("i",{className:"bi bi-info-circle",style:{marginRight:"auto",width:"100%"}})})})]}),e.jsx(s.Control,{type:"text",name:"discountPrice",placeholder:"nuevo descuento",value:n.discountPrice,onChange:h})]})]}),t.item.table==="stock"?e.jsx(pe,{amount:t.item.amount,size:t.item.size,formData:n,handleInputChange:h}):null,t.item.category==="accesorios"&&e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput3",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Tipo"})}),e.jsxs(s.Select,{name:"type",value:n.type,onChange:h,children:[e.jsx("option",{value:"",children:"Selecciona un tipo"}),e.jsx("option",{value:"totebag",children:"Tote Bag"})]})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Descripcion actual:"})}),t.item.category==="guardapolvo"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:m,children:[e.jsxs("div",{style:y,children:[e.jsx("strong",{children:"Base:"})," ",t.item.description!==void 0?t.item.description.base:null,e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nueva base",name:"base",onChange:h,value:n.description.base})]}),e.jsxs("div",{style:y,children:[e.jsx("strong",{children:"Detalle:"})," ",t.item.description!==void 0?t.item.description.detalle:null,e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo detalle",name:"detalle",onChange:h,value:n.description.detalle})]})]}),e.jsxs("div",{style:m,children:[e.jsxs("div",{style:y,children:[e.jsx("strong",{children:"Vivos:"})," ",t.item.description?t.item.description.vivos:null,e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo vivo",name:"vivos",onChange:h,value:n.description.vivos})]}),e.jsxs("div",{style:y,children:[e.jsx("strong",{children:"Bolsillos:"})," ",t.item.description?t.item.description.bolsillos:null,e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo bolsillos",name:"bolsillos",onChange:h,value:n.description.bolsillos})]})]})]}):null,e.jsx(s.Control,{as:"textarea",placeholder:"nueva descripcion",name:"general",onChange:h,value:n.description.general,rows:4})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Imagen Frente"})}),e.jsx(s.Control,{type:"file",name:"imageFront",onChange:b})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Imagen Dorso"})}),e.jsx(s.Control,{type:"file",name:"imageBack",onChange:b})]}),t.item.table==="stock"?e.jsxs(s.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Imagen Talles"})}),e.jsx(s.Control,{type:"file",name:"imageSizes",onChange:b})]}):null]})}),e.jsxs(I.Footer,{children:[e.jsx(R,{variant:"danger",onClick:w,style:{marginRight:"auto"},children:"Eliminar"}),e.jsx(R,{variant:"secondary",onClick:t.onHide,children:"Cerrar"}),e.jsx(R,{variant:"dark",onClick:C,children:"Guardar Cambios"})]})]})},lt=t=>{const a=W(),o=M(w=>w.login),[d,i]=u.useState({display:"none",text:""}),[v,j]=u.useState([]),[n,p]=u.useState({name:"",price:"",type:"",category:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},amount:"",amountToBuy:1,size:"",table:t.table,img:"",img2:"",img3:"",imgs:[]}),h=w=>{const{name:m,value:y}=w.target;p(m==="base"||m==="general"||m==="detalle"||m==="vivos"||m==="bolsillos"?{...n,description:{...n.description,[m]:y}}:{...n,[m]:y})},b=w=>{const m=w.target.files[0];if(!m)return;const y=w.target.name;y==="imageFront"?p(x=>({...x,img:m.name})):y==="imageBack"?p(x=>({...x,img2:m.name})):y==="imageSizes"&&p(x=>({...x,img3:m.name})),j(x=>[...x,m]),p(x=>({...x,imgs:[...n.imgs,m.name]}))},C=async w=>{w.preventDefault();const m=Date.now()+"-"+Math.round(Math.random()*1e9);if(n.name===""){i({display:"block",text:"Ingresar nombre"});return}else if(n.price===""){i({display:"block",text:"Ingresar precio"});return}else if(n.description.general===""){i({display:"block",text:"Ingresar descripcion"});return}else if(n.img===""){i({display:"block",text:"Ingresar imagen frente"});return}else if(n.img2===""){i({display:"block",text:"Ingresar dorso"});return}if(t.table==="stock"){if(n.amount===""){i({display:"block",text:"Ingresar cantidad"});return}else if(n.size===""){i({display:"block",text:"Ingresar talle"});return}}i({display:"none",text:""});let y="";/prueba[\$0-9]/.test(n.name)&&(y="-dev");const x=n;x.img=`${A}${y}/${m}-${n.img}`,x.img2=`${A}${y}/${m}-${n.img2}`,x.img3=n.img3!==""?`${A}${y}/${m}-${n.img3}`:void 0,x.table=t.table,x.type=t.table,x.category=t.category,x.discountPrice=void 0;const l=new FormData;l.append("blobName",m),l.append("containerName","guardapolvos"),console.log(n);try{k.fire({title:`Estas segura que queres agregar ${n.name}?`,icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async r=>{if(r.isConfirmed){try{const c=q(o.token);await H.create(n,c),v.forEach(f=>{l.append("images",f)}),await le.upload(l,c)}catch(c){if(console.error(c),c.response.status===401)k.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(f=>{f.isConfirmed&&a("/login")});else{k.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}k.fire({title:`${n.name} agregado!`,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(()=>{t.initializeProducts(),t.onHide(),p({name:"",price:"",type:"",category:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},amount:"",amountToBuy:1,size:"",table:t.table,img:"",img2:"",img3:"",imgs:[]})})}})}catch(r){console.error("Error:",r)}};return e.jsxs(I,{...t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(I.Header,{closeButton:!0,children:e.jsx(I.Title,{id:"contained-modal-title-vcenter",children:"Agregar nuevo producto"})}),e.jsx(Ze,{variant:"danger",style:{display:`${d.display}`},children:d.text},"danger"),e.jsx(I.Body,{children:e.jsxs(s,{onSubmit:C,encType:"multipart/form-data",children:[e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput1",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Nombre"})}),e.jsx(s.Control,{type:"text",name:"name",placeholder:"nuevo nombre",value:n.name,onChange:h})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput2",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Precio"})}),e.jsx(s.Control,{type:"text",name:"price",placeholder:"nuevo precio",value:n.price,onChange:h})]}),t.category==="accesorios"&&e.jsxs(s.Group,{className:"mb-3",controlId:"controlInput3",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Tipo"})}),e.jsxs(s.Select,{name:"type",value:n.type,onChange:h,children:[e.jsx("option",{value:"",children:"Selecciona un tipo"}),e.jsx("option",{value:"totebag",children:"Totebag"})]})]}),t.table==="stock"?e.jsx(pe,{amount:"",size:"",formData:n,handleInputChange:h}):null,e.jsxs(s.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Descripcion"})}),t.category!=="accesorios"?e.jsxs(e.Fragment,{children:[e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nueva base",name:"base",onChange:h,value:n.description.base}),e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo detalle",name:"detalle",onChange:h,value:n.description.detalle}),e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo vivo",name:"vivos",onChange:h,value:n.description.vivos}),e.jsx(s.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo bolsillos",name:"bolsillos",onChange:h,value:n.description.bolsillos})]}):null,e.jsx(s.Control,{as:"textarea",placeholder:"nueva descripcion general",name:"general",onChange:h,value:n.description.general,rows:3})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Imagen Frente"})}),e.jsx(s.Control,{type:"file",name:"imageFront",onChange:b})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Imagen Dorso"})}),e.jsx(s.Control,{type:"file",name:"imageBack",onChange:b})]}),t.table==="stock"?e.jsxs(s.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(s.Label,{children:e.jsx("strong",{children:"Imagen Talles"})}),e.jsx(s.Control,{type:"file",name:"imageSizes",onChange:b})]}):null]})}),e.jsxs(I.Footer,{children:[e.jsx(R,{variant:"secondary",onClick:t.onHide,children:"Cerrar"}),e.jsx(R,{variant:"dark",onClick:C,children:"Guardar Cambios"})]})]})},_=({title:t,table:a,guardapolvosList:o,showCreateModal:d,showEditModal:i})=>{var S;const[v,j]=u.useState(!1),[n,p]=u.useState(o);u.useEffect(()=>{p(o)},[o]);const h=M(g=>g.filter.search.toLowerCase()),b=Q(),[C,w]=u.useState(1),m=6,y=n.length,x=Math.ceil(y/m),l=g=>{w(g)},r=()=>{const g=(C-1)*m,P=g+m;if(n.length>0)return n.slice(g,P)},c=async()=>{if(j(!0),h!==""){w(1);const g=await D.getSearch({table:a,name:h});p(g)}else f();setTimeout(()=>{j(!1)},1e3)},f=()=>{b(_e("")),p(o)},N=g=>{k.fire({imageUrl:g,showConfirmButton:!1})},B={margin:"0px",fontSize:"16px",background:"inherit",border:"none"},T={marginRight:"5px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",backgroundColor:"#f3f3f3",padding:"4px",borderRadius:"6px"};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex w-100",children:[e.jsx("h4",{className:"label-titulos",children:t}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex"},children:[n.length!==o.length?e.jsx("div",{onClick:()=>f(),style:T,children:"reiniciar"}):null,e.jsx("div",{children:e.jsx(ze,{displaySearch:c,filtrateSearch:null})}),e.jsx("button",{onClick:()=>d(a),style:B,children:e.jsx(Le,{width:"20",height:"20"})})]})]}),v?e.jsx(Ge,{}):e.jsxs("div",{className:"tabla-container",children:[e.jsxs("table",{className:"tabla-de-productoss",children:[e.jsx("thead",{children:a==="stock"?e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Talle"}),e.jsx("th",{children:"Frente"}),e.jsx("th",{children:"Dorso"}),e.jsx("th",{style:{width:"50px"},children:"Descuento"}),e.jsx("th",{})]}):e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Frente"}),e.jsx("th",{children:"Dorso"}),e.jsx("th",{style:{width:"50px"},children:"Descuento"}),e.jsx("th",{children:"Editar"})]})}),(S=r())==null?void 0:S.map((g,P)=>e.jsx("tbody",{children:e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("td",{children:g.name}),e.jsxs("td",{children:["$ ",ae(g)?g.discountPrice:g.price]}),a==="stock"?e.jsx("td",{children:g.amount}):"",a==="stock"?e.jsx("td",{children:g.size}):"",e.jsx("td",{children:e.jsx("img",{src:g.img,onClick:()=>N(g.img),alt:g.description.general,className:"small-img-admin",style:{cursor:"pointer"}})}),e.jsx("td",{children:e.jsx("img",{src:g.img2,onClick:()=>N(g.img2),alt:g.description.general,className:"small-img-admin",style:{cursor:"pointer"}})}),e.jsx("td",{children:ae(g)?e.jsx("i",{className:"bi bi-check-lg",style:{color:"green"}}):e.jsx("i",{className:"bi bi-x-lg",style:{color:"red"}})}),e.jsx("td",{onClick:()=>i(g,a),style:{cursor:"pointer"},children:e.jsx("i",{className:"bi bi-pencil-square"})})]})},P))]}),e.jsx(Je,{currentPage:C,totalPages:x,onPageChange:l})]})]})},ct=({show:t,onHide:a,guardapolvosList:o})=>{const d=M(x=>x.login),i=W(),[v,j]=u.useState("guardapolvos"),[n,p]=u.useState(0),[h,b]=u.useState(o);u.useEffect(()=>{v==="nivel_inicial"&&b(o.nivelInicial),v==="primaria"&&b(o.primaria),v==="stock"&&b(o.stock),v==="guardapolvos"&&b(o.all)},[v,o]);const C=x=>{j(x.target.value)},w=x=>{const l=x.target.value/100;p(l)},m=async(x,l)=>{try{const r=q(d.token);k.fire({title:`Estas segura que queres modificar en un ${x*100}% el precio de los guardapolvos?`,icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async c=>{if(c.isConfirmed)try{if((await H.changePriceByPorcentage({porcent:x,guardapolvos:l},r)).ok){He(.4);return}else throw new Error("Error al intentar modificar el precio.")}catch(f){if(console.log(f),f.response.status===401)k.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(N=>{if(N.isConfirmed){i("/login");return}});else{k.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}})}catch(r){console.error(r),k.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"})}},y=x=>e.jsx(J,{id:"button-tooltip",...x,children:"Si queremos bajar el precio, lo unico que hay que hacer es poner el numero en negativo. Ejemplo: Queremos bajar un 10%, ponemos -10%."});return e.jsxs(I,{show:t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(I.Header,{closeButton:!0,children:e.jsx(I.Title,{id:"contained-modal-title-vcenter",children:"Administrar todos los productos"})}),e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex",style:{fontSize:"16px",height:"40px",alignItems:"center"},children:[e.jsx("p",{style:{margin:"0px"},children:"Cambiar el precio a: "}),e.jsxs("select",{name:"",onChange:C,style:{marginLeft:"5px",border:"none",cursor:"pointer",outline:"none",boxShadow:"none"},children:[e.jsx("option",{value:"guardapolvos",children:"Todos"}),e.jsx("option",{value:"nivel_inicial",children:"Nivel Inicial"}),e.jsx("option",{value:"primaria",children:"Primaria"}),e.jsx("option",{value:"stock",children:"Stock"})]})]}),e.jsxs("div",{className:"d-flex",style:{fontSize:"16px",height:"40px",alignItems:"center"},children:[e.jsx("p",{style:{margin:"0px"},children:"En un: "}),e.jsx("input",{type:"text",onChange:w,style:{width:"40px",outline:"none",boxShadow:"none",border:"1px solid #e2e2e2",marginLeft:"4px"}}),e.jsx("p",{style:{margin:"0px",marginRight:"20px"},children:"%"}),e.jsx(xe,{placement:"right",delay:{show:250,hide:400},overlay:y,children:e.jsx("div",{children:e.jsx("i",{className:"bi bi-info-circle",style:{marginRight:"auto",width:"100%"}})})})]})]}),e.jsxs(I.Footer,{children:[e.jsx(R,{variant:"secondary",onClick:a,children:"Cerrar"}),e.jsx(R,{className:"btn btn-dark",onClick:()=>m(n,h),children:"Aplicar cambios"})]})]})},pt=()=>{const[t,a]=u.useState({all:[],nivelInicial:[],primaria:[],stock:[],accesorios:[]}),[o]=qe(),d=M(S=>S.administration.tabChoosen),i=Q(),[v,j]=u.useState(!1),[n,p]=u.useState(!1),[h,b]=u.useState(!1),[C,w]=u.useState(""),[m,y]=u.useState(""),[x,l]=u.useState({}),r=async()=>{if(o&&o.size==0)try{const S=await D.getSearch({category:"guardapolvo"}),g=await D.getSearch({type:"nivel_inicial",category:"guardapolvo"}),P=await D.getSearch({type:"primaria",category:"guardapolvo"}),F=await D.getSearch({type:"stock",category:"guardapolvo"}),z=await D.getSearch({category:"accesorios"});a({all:S,nivelInicial:g,primaria:P,stock:F,accesorios:z})}catch(S){console.error(S.message)}};u.useEffect(()=>{r()},[o]);const c=(S,g)=>{p(!0),w(g),l(S)},f=(S,g)=>{w(S),y(g),j(!0)},N=()=>{b(!0)},B=S=>{i(Ue(S))},T={width:"100%"};return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:"contenedor-tablas-productos",children:[e.jsx("div",{className:"d-flex w-100 mb-5",onClick:()=>N(),children:e.jsxs("div",{className:"card",style:{cursor:"pointer"},children:[e.jsx("div",{className:"card-body",children:"Administrar todos los productos"}),e.jsxs("div",{className:"card-footer d-flex align-items-center justify-content-between",children:[e.jsx("div",{className:"small text-black stretched-link",children:"Ver detalles"}),e.jsx("div",{className:"small text-black",children:e.jsx("i",{className:"fas fa-angle-right"})})]})]})}),e.jsx("div",{style:{width:"100%",backgroundColor:"#fff",padding:"10px"},className:"tabs-container",children:e.jsxs(fe,{defaultActiveKey:d,id:"uncontrolled-tab-example",className:"mb-3",fill:!0,onSelect:B,children:[e.jsx(G,{eventKey:"nivel_inicial",title:"Nivel Inicial",style:T,children:e.jsx(_,{title:"NIVEL INICIAL",table:"nivel_inicial",category:"guardapolvo",guardapolvosList:t.nivelInicial,showCreateModal:()=>f("nivel_inicial","guardapolvo"),showEditModal:c})}),e.jsx(G,{eventKey:"primaria",title:"Primaria",style:T,children:e.jsx(_,{title:"PRIMARIA",table:"primaria",category:"guardapolvo",guardapolvosList:t.primaria,showCreateModal:()=>f("primaria","guardapolvo"),showEditModal:c})}),e.jsx(G,{eventKey:"stock",title:"Stock",style:T,children:e.jsx(_,{title:"STOCK",table:"stock",category:"guardapolvo",guardapolvosList:t.stock,showCreateModal:()=>f("stock","guardapolvo"),showEditModal:c})}),e.jsx(G,{eventKey:"accesorios",title:"Accesorios",style:T,children:e.jsx(_,{title:"ACCESORIOS",table:"stock",category:"accesorios",guardapolvosList:t.accesorios,showCreateModal:()=>f("stock","accesorios"),showEditModal:c})})]})}),e.jsx(rt,{item:x,show:n,table:C,onHide:()=>p(!1),initializeProducts:r}),e.jsx(lt,{show:v,table:C,category:m,onHide:()=>j(!1),initializeProducts:r}),e.jsx(ct,{show:h,onHide:()=>b(!1),guardapolvosList:t})]})})})};export{pt as default};
