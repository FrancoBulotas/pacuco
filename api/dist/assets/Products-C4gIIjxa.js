import{r as g,b as M,j as e,d as U,a as z,at as T,u as $,au as v,V as F,av as P,aw as B,i as I,L as q,ax as W,ay as R,a0 as J,ag as N,az as X,aA as Y,aB as Z,$ as K}from"./index-DrVgBgg_.js";import{B as w}from"./breadcrum-Dceg7rvx.js";import{P as V}from"./PaginationProductos-C-mX8mzp.js";const O=g.forwardRef(({bsPrefix:s,size:n,vertical:t=!1,className:i,role:r="group",as:a="div",...o},l)=>{const d=M(s,"btn-group");let c=d;return t&&(c=`${d}-vertical`),e.jsx(a,{...o,ref:l,role:r,className:U(i,c,n&&`${d}-${n}`)})});O.displayName="ButtonGroup";const Q=({updateQueryParams:s,isCustom:n,isAccesory:t,guardapolvos:i})=>{const r=z(),a={border:"1px solid #e0e0e0",padding:"20px",borderRadius:"6px",marginBottom:"5px"},o={padding:"0px",fontSize:"17px"},l={margin:"10px 0px",border:"1px solid #e0e0e0",width:"100%"},d={display:"flex",flexWrap:"wrap"},c={fontSize:"15px",backgroundColor:"#f1f1f1",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"6px",padding:"20px",margin:"6px",width:"60px",height:"20px"},p={fontSize:"15px",backgroundColor:"#f1f1f1",display:"flex",justifyContent:"center",alignItems:"center",border:"none",borderRadius:"6px",padding:"10px",margin:"6px",width:"80px"},h=y=>{const C=i.map(b=>b.description[y]);return[...new Set(C)]};return h("base"),h("detalle"),h("vivos"),h("bolsillos"),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:a,children:[e.jsx("h4",{style:o,children:"Guardapolvos"}),e.jsx("div",{style:l}),e.jsxs("div",{style:d,children:[e.jsx("button",{style:p,onClick:()=>r(s("type","nivel_inicial")),children:"Nivel Inicial"}),e.jsx("button",{style:p,onClick:()=>r(s("type","primaria")),children:"Primaria"}),e.jsx("button",{style:p,onClick:()=>r(s("type","stock")),children:"Stock"}),e.jsx("button",{style:p,onClick:()=>r(s("type","niños")),children:"Niños"})]})]}),e.jsxs("div",{style:a,children:[e.jsx("h4",{style:o,children:"Accesorios"}),e.jsx("div",{style:l}),e.jsx("div",{style:d,children:e.jsx("button",{style:p,onClick:()=>r(s("type","totebag")),children:"Totebags"})})]}),n&&e.jsxs("div",{style:a,children:[e.jsx("h4",{style:o,children:"Talle"}),e.jsx("div",{style:l}),e.jsxs("div",{style:d,children:[e.jsx("button",{style:c,onClick:()=>r(s("size","00")),children:"00"}),e.jsx("button",{style:c,onClick:()=>r(s("size","0")),children:"0"}),e.jsx("button",{style:c,onClick:()=>r(s("size","1")),children:"1"}),e.jsx("button",{style:c,onClick:()=>r(s("size","2")),children:"2"}),e.jsx("button",{style:c,onClick:()=>r(s("size","3")),children:"3"}),e.jsx("button",{style:c,onClick:()=>r(s("size","4")),children:"4"}),e.jsx("button",{style:c,onClick:()=>r(s("size","5")),children:"5"})]})]}),t&&e.jsxs("div",{style:a,children:[e.jsx("h4",{style:o,children:"Talle"}),e.jsx("div",{style:l}),e.jsxs("div",{style:d,children:[e.jsx("button",{style:c,onClick:()=>r(s("size","M")),children:"M"}),e.jsx("button",{style:c,onClick:()=>r(s("size","L")),children:"L"})]})]})]})},ee=({resetProducts:s,filters:n})=>{const t={position:"relative",backgroundColor:"#f1f1f1",margin:"5px",borderRadius:"6px",display:"flex",justifyContent:"center",alignItems:"center"},i={top:"-8px",left:"0px",padding:"4px 6px",border:"none"};return e.jsx("div",{style:{margin:"10px 25px",padding:"10px",border:"1px solid #f1f1f1",borderRadius:"6px",fontSize:"14px"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("div",{children:"Filtros: "}),e.jsx("div",{className:"d-flex",style:{marginLeft:"6px"},children:Object.entries(n).map(([r,a],o)=>{if(a!=null){let l;return a=="asc"&&(l="precio menor a mayor"),a=="desc"&&(l="precio mayor a menor"),e.jsxs("div",{style:t,children:[e.jsx("div",{style:{padding:"8px 15px"},children:r==="sortByPrice"?l:a}),e.jsx("button",{onClick:()=>s(r),className:"badge bg-dark text-white position-absolute",style:i,children:"x"})]},o)}})}),e.jsx("div",{style:{marginRight:"auto"}})]})})},se=({setIsLoading:s,table:n,guardapolvosList:t})=>{const[i,r]=g.useState({}),[a,o]=g.useState(!1),[l,d]=g.useState(!1),c=z(),p=T(),h=$(),y=1e3,[C,b]=g.useState(!1),[S,f]=g.useState({size:null,table:null,sortByPrice:null,name:null}),G=window.location.href,x=new URL(G),k=()=>b(!1),_=()=>{b(!0),E(),H()};g.useEffect(()=>{const u=new URLSearchParams(p.search);r(u),x.searchParams.get("size")&&(x.searchParams.get("type")=="primaria"||x.searchParams.get("type")=="nivel_incial")&&(x.searchParams.delete("size"),window.location.href=x.toString()),f(j=>({...j,size:x.searchParams.get("size"),type:x.searchParams.get("type"),sortByPrice:x.searchParams.get("sortByPrice"),name:x.searchParams.get("name"),category:x.searchParams.get("category")}))},[p.search]);const A=u=>{k(),h(B({page:1,table:n})),u=="size"&&(f(m=>({...m,size:null})),x.searchParams.delete("size")),u=="type"&&(f(m=>({...m,size:null})),x.searchParams.delete("type")),u=="sortByPrice"&&(f(m=>({...m,sortByPrice:null})),x.searchParams.delete("sortByPrice")),u=="name"&&(f(m=>({...m,name:null})),x.searchParams.delete("name")),u=="category"&&(f(m=>({...m,category:null})),x.searchParams.delete("category"));let j=S;j[u]=null,Object.values(j).every(m=>m===null)&&x.searchParams.append("category","guardapolvo"),window.location.href=x.toString()},L=(u,j)=>(i.set(u,j),`${p.pathname}?${i.toString()}`),D=(u,j)=>(k(),s(!0),h(B({page:1,table:n.replace(" ","_")})),i.set(u,j),setTimeout(async()=>{s(!1)},y),`${p.pathname}?${i.toString()}`),E=()=>{i&&(i.get("type")==="stock"?o(!0):o(!1))},H=()=>{i&&(i.get("type")==="totebag"?d(!0):d(!1))};return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",height:"40px",marginLeft:"10px",marginRight:"10px",marginBottom:"5px",paddingTop:"5px"},children:[e.jsxs(v,{as:O,className:"dropdown-custom",children:[e.jsx(F,{variant:"light",style:{backgroundColor:"#fff",color:"#000",padding:"5px 25px",fontSize:"16px"},children:"Ordenar"}),e.jsx(v.Toggle,{split:!0,variant:"light",id:"dropdown-split-basic",style:{backgroundColor:"#fff",color:"#000",padding:"5px 25px"}}),e.jsxs(v.Menu,{children:[e.jsx(v.Item,{onClick:()=>c(L("sortByPrice","asc")),children:"Precio menor a mayor"}),e.jsx(v.Item,{onClick:()=>c(L("sortByPrice","desc")),children:"Precio mayor a menor"})]})]}),e.jsxs(F,{onClick:_,variant:"light",style:{marginLeft:"auto",backgroundColor:"#fff",color:"#000",padding:"5px 25px",fontSize:"16px"},children:["Filtrar ",e.jsx("i",{className:"bi bi-filter",style:{padding:"5px 5px"}})]}),e.jsxs(P,{show:C,onHide:k,children:[e.jsx(P.Header,{closeButton:!0,children:e.jsx(P.Title,{children:"Filtrar"})}),e.jsx(P.Body,{children:e.jsx(Q,{updateQueryParams:D,isCustom:a,isAccesory:l,guardapolvos:t})})]})]}),Object.values(S).every(u=>u===null)?null:e.jsx(ee,{resetProducts:A,filters:S})]})},te=({type:s})=>{const n=z();return e.jsxs(w,{className:"px-3 px-lg-3 my-3 breadcrumb-container",children:[e.jsx(w.Item,{onClick:()=>n("/"),children:"Inicio"}),e.jsxs(w.Item,{active:!0,children:[" ",s," "]})]})},ne=()=>{const s=T(),n=I(a=>a.filter.previusSearch.toLowerCase()),t={margin:"200px 0px"},i=`no hay resultados para "${n}"`;return e.jsx("div",{style:t,children:s.pathname.replace("/","")==="busqueda"?i:"no hay resultados que cumplan con tu busqueda..."})},re=({guardapolvos:s,table:n})=>e.jsx("div",{className:"products-container",children:(s==null?void 0:s.length)===0?e.jsx(ne,{}):s==null?void 0:s.map((t,i)=>t.show?e.jsx(q,{className:"producto",to:`/products?id=${t.id}`,children:e.jsxs("div",{className:"a-contenedor-productos",children:[(n==="stock"||n==="guardapolvos"||n==="busqueda")&&t.amount===0?e.jsx("div",{className:"badge bg-dark text-white position-absolute tag-stock",children:"Sin Stock"}):null,e.jsx(W,{guardapolvo:t,navigateTo:n,loadGuardapolvos:!0}),e.jsx("div",{className:"contenedor-imgs",children:e.jsxs("div",{className:"contenedor-img-carrito",style:{marginTop:"20px"},children:[e.jsx(R,{src:t.img,alt:t.description.general,className:"section-img-carrito"}),e.jsx(R,{src:t.img2,alt:t.description.general,className:"section-img-carrito-hover",secondImg:!0})]})}),e.jsxs("div",{className:"div-contenedor-detalles",children:[e.jsx("p",{className:"nombreProducto",children:t.name}),e.jsx("div",{className:"d-flex",style:{flexDirection:"column"},children:J(t)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-decoration-line-through",style:{marginRight:"8px",color:"gray"},children:["$ ",N(t.price)]}),e.jsxs("span",{className:"porcentajeProductoOff",children:[X(t),"% OFF"]})]}),e.jsxs("span",{className:"precioProducto",children:["$",N(t.discountPrice)]})]}):e.jsxs("p",{className:"precioProducto",children:["$ ",N(t.price)]})}),e.jsx("div",{children:(t.table==="stock"||t.table==="accesorios")&&t.amount!==0?e.jsxs("p",{style:{marginLeft:"auto"},children:[t.amount," en stock"]}):null})]})]})},i):"")}),ie=({guardapolvos:s})=>{const n=I(l=>l.filter.previusSearch.toLowerCase()),[t]=Y(),[i,r]=g.useState({}),a={color:"#777",marginLeft:"10px"};g.useEffect(()=>{const l={};t.forEach((d,c)=>{l[c]=d}),r(l)},[t]);const o=()=>s.filter(d=>d.show).length;return e.jsx("div",{children:Object.keys(i).includes("name")?e.jsxs("div",{style:a,children:[" ",o()," resultado",o()===1?"":"s",' para "',n,'"']}):e.jsxs("div",{style:a,children:[" ",o()," resultado",o()===1?"":"s"]})})},de=({guardapolvos:s,table:n})=>{const t=$(),[i,r]=g.useState(!1),a=I(h=>h.filter.choosenPage[n.replace(" ","_")]),o=20,l=s==null?void 0:s.length,d=Math.ceil(l/o),c=h=>{t(B({page:h,table:n.replace(" ","_")}))},p=()=>{const h=(a-1)*o,y=h+o;return s==null?void 0:s.slice(h,y)};return e.jsxs("div",{className:"margin-auto width-90",children:[e.jsx(te,{type:n.replace("_"," ")}),e.jsx(se,{setIsLoading:r,table:n,guardapolvosList:s}),e.jsx(ie,{guardapolvos:s}),e.jsx(Z,{}),i?e.jsx(K,{}):e.jsxs("div",{children:[e.jsx(re,{guardapolvos:p(),table:n}),e.jsx(V,{currentPage:a,totalPages:d,onPageChange:c})]})]})};export{de as default};
