import{j as e,F as i,c as pe,d as ne,i as ve,r as g,o as je,g as be,l as ye,e as Z,f as V,h as J,k as Ce,m as we,n as Ne,p as ke,q as $,t as L,v as oe,w as Q,x as Te,y as X,z as U,P as Se,A as Ie,B as Be,C as Ee,D as E,b as se,u as z,E as A,G as Pe,S as I,H as K,I as Y,J as ae,K as Fe,N as Oe,M as ee,O as Re,Q as De,T as $e,U as Me,V as Ae,W as Le,X as ze,Y as Ge,Z as _e}from"./index-JvpFp6-H.js";import{U as D,i as ie,T as He,g as Ue,a as Ke,b as qe,c as _}from"./Tab-B_Do5JQh.js";import{s as q}from"./token-By_1sbaR.js";import{M as F}from"./Modal-svmvEi2u.js";import{A as Ve}from"./Alert-CVTlDxH_.js";import{P as We}from"./PaginationProductos-B0jcrzp-.js";const re=({amount:t,size:o,formData:s,handleInputChange:c})=>{const l={display:"flex",justifyContent:"space-around",gap:"5px"},p={width:"50%"};return e.jsxs("div",{style:l,children:[e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput2",style:p,children:[e.jsxs(i.Label,{children:[e.jsxs("strong",{children:["Cantidad",t!==""?":":""," "]}),t]}),e.jsx(i.Control,{type:"text",name:"amount",placeholder:"nueva cantidad",value:s.amount,onChange:c})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput2",style:p,children:[e.jsxs(i.Label,{children:[e.jsxs("strong",{children:["Talle",t!==""?":":""," "]}),o]}),e.jsx(i.Control,{type:"text",name:"size",placeholder:"nuevo talle",value:s.size,onChange:c})]})]})},Ze=()=>{};function Je(t,o,{disabled:s,clickTrigger:c}={}){const l=o||Ze;pe(t,l,{disabled:s,clickTrigger:c});const p=ne(b=>{ve(b)&&l(b)});g.useEffect(()=>{if(s||t==null)return;const b=je(be(t));let n=(b.defaultView||window).event;const x=ye(b,"keyup",m=>{if(m===n){n=void 0;return}p(m)});return()=>{x()}},[t,s,p])}const le=g.forwardRef((t,o)=>{const{flip:s,offset:c,placement:l,containerPadding:p,popperConfig:b={},transition:n,runTransition:x}=t,[m,w]=Z(),[y,C]=Z(),d=V(w,o),h=J(t.container),j=J(t.target),[r,a]=g.useState(!t.show),u=Ce(j,m,we({placement:l,enableEvents:!!t.show,containerPadding:p||5,flip:s,offset:c,arrowElement:y,popperConfig:b}));t.show&&r&&a(!1);const v=(...O)=>{a(!0),t.onExited&&t.onExited(...O)},T=t.show||!r;if(Je(m,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!T)return null;const{onExit:B,onExiting:N,onEnter:k,onEntering:S,onEntered:M}=t;let f=t.children(Object.assign({},u.attributes.popper,{style:u.styles.popper,ref:d}),{popper:u,placement:l,show:!!t.show,arrowProps:Object.assign({},u.attributes.arrow,{style:u.styles.arrow,ref:C})});return f=Ne(n,x,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:f,onExit:B,onExiting:N,onExited:v,onEnter:k,onEntering:S,onEntered:M}),h?ke.createPortal(f,h):null});le.displayName="Overlay";const ce=g.forwardRef(({className:t,bsPrefix:o,as:s="div",...c},l)=>(o=$(o,"popover-header"),e.jsx(s,{ref:l,className:L(t,o),...c})));ce.displayName="PopoverHeader";const W=g.forwardRef(({className:t,bsPrefix:o,as:s="div",...c},l)=>(o=$(o,"popover-body"),e.jsx(s,{ref:l,className:L(t,o),...c})));W.displayName="PopoverBody";function de(t,o){let s=t;return t==="left"?s=o?"end":"start":t==="right"&&(s=o?"start":"end"),s}function ue(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Qe=g.forwardRef(({bsPrefix:t,placement:o="right",className:s,style:c,children:l,body:p,arrowProps:b,hasDoneInitialMeasure:n,popper:x,show:m,...w},y)=>{const C=$(t,"popover"),d=oe(),[h]=(o==null?void 0:o.split("-"))||[],j=de(h,d);let r=c;return m&&!n&&(r={...c,...ue(x==null?void 0:x.strategy)}),e.jsxs("div",{ref:y,role:"tooltip",style:r,"x-placement":h,className:L(s,C,h&&`bs-popover-${j}`),...w,children:[e.jsx("div",{className:"popover-arrow",...b}),p?e.jsx(W,{children:l}):l]})}),Xe=Object.assign(Qe,{Header:ce,Body:W,POPPER_OFFSET:[0,8]}),me=g.forwardRef(({bsPrefix:t,placement:o="right",className:s,style:c,children:l,arrowProps:p,hasDoneInitialMeasure:b,popper:n,show:x,...m},w)=>{t=$(t,"tooltip");const y=oe(),[C]=(o==null?void 0:o.split("-"))||[],d=de(C,y);let h=c;return x&&!b&&(h={...c,...ue(n==null?void 0:n.strategy)}),e.jsxs("div",{ref:w,style:h,role:"tooltip","x-placement":C,className:L(s,t,`bs-tooltip-${d}`),...m,children:[e.jsx("div",{className:"tooltip-arrow",...p}),e.jsx("div",{className:`${t}-inner`,children:l})]})});me.displayName="Tooltip";const he=Object.assign(me,{TOOLTIP_OFFSET:[0,6]});function Ye(t){const o=g.useRef(null),s=$(void 0,"popover"),c=$(void 0,"tooltip"),l=g.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(o.current){if(Q(o.current,s))return Xe.POPPER_OFFSET;if(Q(o.current,c))return he.TOOLTIP_OFFSET}return[0,0]}}}),[t,s,c]);return[o,[l]]}function et(t,o){const{ref:s}=t,{ref:c}=o;t.ref=s.__wrapped||(s.__wrapped=l=>s(U(l))),o.ref=c.__wrapped||(c.__wrapped=l=>c(U(l)))}const fe=g.forwardRef(({children:t,transition:o=X,popperConfig:s={},rootClose:c=!1,placement:l="top",show:p=!1,...b},n)=>{const x=g.useRef({}),[m,w]=g.useState(null),[y,C]=Ye(b.offset),d=V(n,y),h=o===!0?X:o||void 0,j=ne(r=>{w(r),s==null||s.onFirstUpdate==null||s.onFirstUpdate(r)});return Te(()=>{m&&b.target&&(x.current.scheduleUpdate==null||x.current.scheduleUpdate())},[m,b.target]),g.useEffect(()=>{p||w(null)},[p]),e.jsx(le,{...b,ref:d,popperConfig:{...s,modifiers:C.concat(s.modifiers||[]),onFirstUpdate:j},transition:h,rootClose:c,placement:l,show:p,children:(r,{arrowProps:a,popper:u,show:v})=>{var T,B;et(r,a);const N=u==null?void 0:u.placement,k=Object.assign(x.current,{state:u==null?void 0:u.state,scheduleUpdate:u==null?void 0:u.update,placement:N,outOfBoundaries:(u==null||(T=u.state)==null||(B=T.modifiersData.hide)==null?void 0:B.isReferenceHidden)||!1,strategy:s.strategy}),S=!!m;return typeof t=="function"?t({...r,placement:N,show:v,...!o&&v&&{className:"show"},popper:k,arrowProps:a,hasDoneInitialMeasure:S}):g.cloneElement(t,{...r,placement:N,arrowProps:a,popper:k,hasDoneInitialMeasure:S,className:L(t.props.className,!o&&v&&"show"),style:{...t.props.style,...r.style}})}})});fe.displayName="Overlay";function tt(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function te(t,o,s){const[c]=o,l=c.currentTarget,p=c.relatedTarget||c.nativeEvent[s];(!p||p!==l)&&!Ee(l,p)&&t(...o)}Se.oneOf(["click","hover","focus"]);const nt=({trigger:t=["hover","focus"],overlay:o,children:s,popperConfig:c={},show:l,defaultShow:p=!1,onToggle:b,delay:n,placement:x,flip:m=x&&x.indexOf("auto")!==-1,...w})=>{const y=g.useRef(null),C=V(y,s.ref),d=Ie(),h=g.useRef(""),[j,r]=Be(l,p,b),a=tt(n),{onFocus:u,onBlur:v,onClick:T}=typeof s!="function"?g.Children.only(s).props:{},B=P=>{C(U(P))},N=g.useCallback(()=>{if(d.clear(),h.current="show",!a.show){r(!0);return}d.set(()=>{h.current==="show"&&r(!0)},a.show)},[a.show,r,d]),k=g.useCallback(()=>{if(d.clear(),h.current="hide",!a.hide){r(!1);return}d.set(()=>{h.current==="hide"&&r(!1)},a.hide)},[a.hide,r,d]),S=g.useCallback((...P)=>{N(),u==null||u(...P)},[N,u]),M=g.useCallback((...P)=>{k(),v==null||v(...P)},[k,v]),f=g.useCallback((...P)=>{r(!j),T==null||T(...P)},[T,r,j]),O=g.useCallback((...P)=>{te(N,P,"fromElement")},[N]),xe=g.useCallback((...P)=>{te(k,P,"toElement")},[k]),G=t==null?[]:[].concat(t),R={ref:B};return G.indexOf("click")!==-1&&(R.onClick=f),G.indexOf("focus")!==-1&&(R.onFocus=S,R.onBlur=M),G.indexOf("hover")!==-1&&(R.onMouseOver=O,R.onMouseOut=xe),e.jsxs(e.Fragment,{children:[typeof s=="function"?s(R):g.cloneElement(s,R),e.jsx(fe,{...w,show:j,onHide:k,flip:m,placement:x,popperConfig:c,target:y.current,children:o})]})},ot=t=>{const o=E(r=>r.login),s=se(),c=z(),l=E(r=>r.guardapolvos.guardapolvos),[p,b]=g.useState([]),[n,x]=g.useState({id:"",name:"",price:"",discountPrice:"",amount:"",size:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},img:"",img2:"",img3:""});g.useEffect(()=>{x({...n,description:{...n.description,general:t.item.description?t.item.description.general:""}})},[t.item]);const m=r=>{const{name:a,value:u}=r.target;u.startsWith(" ")||x(a==="base"||a==="general"||a==="detalle"||a==="vivos"||a==="bolsillos"?{...n,description:{...n.description,[a]:u}}:{...n,[a]:u})},w=r=>{const a=r.target.files[0];if(!a)return;const u=r.target.name;u==="imageFront"?x(v=>({...v,img:a.name})):u==="imageBack"?x(v=>({...v,img2:a.name})):u==="imageSizes"&&x(v=>({...v,img3:a.name})),b(v=>[...v,a])},y=async r=>{r.preventDefault();const a=Date.now()+"-"+Math.round(Math.random()*1e9);let u="";if(/prueba[\$0-9]/.test(t.item.name)&&(u="-dev"),!Pe(n.price)&&n.price!==""){I.fire({title:"Ingresa un precio valido!",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}const v={id:t.item.id,table:t.item.table,amountToBuy:1,img:n.img!==""?`${D}${u}/${a}-${n.img}`:t.item.img,img2:n.img2!==""?`${D}${u}/${a}-${n.img2}`:t.item.img2,img3:n.img3!==""?`${D}${u}/${a}-${n.img3}`:t.item.img3,name:n.name!==""?n.name:t.item.name,price:n.price!==""?Number(n.price):Number(t.item.price),discountPrice:n.discountPrice!==""?n.discountPrice:t.item.discountPrice,amount:n.amount!==""?n.amount:t.item.amount,size:n.size!==""?n.size:t.item.size,description:{general:n.description.general!==""?n.description.general:t.item.description.general,base:n.description.base!==""?n.description.base:t.item.description.base,detalle:n.description.detalle!==""?n.description.detalle:t.item.description.detalle,vivos:n.description.vivos!==""?n.description.vivos:t.item.description.vivos,bolsillos:n.description.bolsillos!==""?n.description.bolsillos:t.item.description.bolsillos}},T=new FormData;T.append("blobName",a),T.append("containerName","guardapolvos");try{I.fire({title:"Estas segura que queres modificar?",icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async B=>{if(B.isConfirmed){try{const N=q(o.token);await K.update(t.item.id,v,N);const k=l.map(S=>S.id===t.item.id?v:S);c(Y(v.table,k.filter(S=>S.table===v.table))),p.length>0&&(p.forEach(S=>T.append("images",S)),await ie.upload(T,N))}catch(N){if(console.log(N),N.response.status===401)I.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(k=>{if(k.isConfirmed){s("/login");return}});else{I.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}I.fire({title:`${t.item.name} modificado!`,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(()=>{p.length>0&&ae(.2),t.onHide()})}})}catch(B){console.error("Error:",B),I.fire({title:"Error",text:"No se pudo modificar el producto",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"})}},C=()=>{I.fire({title:"Estas segura que queres eliminar el guardapolvo?",icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async r=>{if(r.isConfirmed)try{const a=q(o.token);await K.deleteGuardapolvo(t.item.id,a);const u=l.filter(v=>v.id!==t.item.id);c(Y(t.item.table,u.filter(v=>v.table===t.item.table))),I.fire({title:"Guardapolvo eliminado correctamente!",icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(v=>{v.isConfirmed&&t.onHide()})}catch(a){console.error("Error:",a),I.fire({title:"Error",text:"No se pudo eliminar el guardapolvo",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}),a.response.data.error==="token expired"&&s("/login")}})},d={display:"flex",justifyContent:"space-around",gap:"5px"},h={width:"50%"},j=r=>e.jsx(he,{id:"button-tooltip",...r,children:"Una vez agregado un descuento, el precio actual se mantiene (aparece tachado), pero el precio que se muestra a los clientes es el del descuento. Para sacar el descuento aplicado, hay que darle un nuevo valor de 0"});return e.jsxs(F,{...t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(F.Header,{closeButton:!0,children:e.jsxs(F.Title,{id:"contained-modal-title-vcenter",children:["Modificar ",t.item.name]})}),e.jsx(F.Body,{children:e.jsxs(i,{onSubmit:y,encType:"multipart/form-data",children:[e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput1",children:[e.jsxs(i.Label,{children:[e.jsx("strong",{children:"Nombre actual:"})," ",t.item.name]}),e.jsx(i.Control,{type:"text",name:"name",placeholder:"nuevo nombre",value:n.name,onChange:m})]}),e.jsxs("div",{style:d,children:[e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput2",style:t.table==="stock"?{width:"50%"}:{width:"100%"},children:[e.jsxs(i.Label,{children:[e.jsx("strong",{children:"Precio actual:"})," $ ",t.item.price]}),e.jsx(i.Control,{type:"text",name:"price",placeholder:"nuevo precio",value:n.price,onChange:m})]}),t.table==="stock"&&e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput3",style:{width:"50%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(i.Label,{children:[e.jsx("strong",{children:"Descuento actual:"})," $ ",t.item.discountPrice||t.item.discountPrice>0?t.item.discountPrice:"0"]}),e.jsx(nt,{placement:"right",delay:{show:250,hide:400},overlay:j,children:e.jsx("div",{children:e.jsx("i",{className:"bi bi-info-circle",style:{marginRight:"auto",width:"100%"}})})})]}),e.jsx(i.Control,{type:"text",name:"discountPrice",placeholder:"nuevo descuento",value:n.discountPrice,onChange:m})]})]}),t.table==="stock"?e.jsx(re,{amount:t.item.amount,size:t.item.size,formData:n,handleInputChange:m}):null,e.jsxs(i.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Descripcion actual:"})}),e.jsxs("div",{style:d,children:[e.jsxs("div",{style:h,children:[e.jsx("strong",{children:"Base:"})," ",t.item.description!==void 0?t.item.description.base:null,e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nueva base",name:"base",onChange:m,value:n.description.base})]}),e.jsxs("div",{style:h,children:[e.jsx("strong",{children:"Detalle:"})," ",t.item.description!==void 0?t.item.description.detalle:null,e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo detalle",name:"detalle",onChange:m,value:n.description.detalle})]})]}),e.jsxs("div",{style:d,children:[e.jsxs("div",{style:h,children:[e.jsx("strong",{children:"Vivos:"})," ",t.item.description?t.item.description.vivos:null,e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo vivo",name:"vivos",onChange:m,value:n.description.vivos})]}),e.jsxs("div",{style:h,children:[e.jsx("strong",{children:"Bolsillos:"})," ",t.item.description?t.item.description.bolsillos:null,e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo bolsillos",name:"bolsillos",onChange:m,value:n.description.bolsillos})]})]}),e.jsx(i.Control,{as:"textarea",placeholder:"nueva descripcion",name:"general",onChange:m,value:n.description.general,rows:4})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Imagen Frente"})}),e.jsx(i.Control,{type:"file",name:"imageFront",onChange:w})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Imagen Dorso"})}),e.jsx(i.Control,{type:"file",name:"imageBack",onChange:w})]}),t.table==="stock"?e.jsxs(i.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Imagen Talles"})}),e.jsx(i.Control,{type:"file",name:"imageSizes",onChange:w})]}):null]})}),e.jsxs(F.Footer,{children:[e.jsx(A,{variant:"danger",onClick:C,style:{marginRight:"auto"},children:"Eliminar guardapolvo"}),e.jsx(A,{variant:"secondary",onClick:t.onHide,children:"Cerrar"}),e.jsx(A,{variant:"dark",onClick:y,children:"Guardar Cambios"})]})]})},st=t=>{E(C=>C.guardapolvos.guardapolvos),z();const o=se(),s=E(C=>C.login),[c,l]=g.useState({display:"none",text:""}),[p,b]=g.useState([]),[n,x]=g.useState({name:"",price:"",description:{general:"",base:"",detalle:"",vivos:"",bolsillos:""},amount:"",amountToBuy:1,size:"",table:t.table,img:"",img2:"",img3:"",imgs:[]}),m=C=>{const{name:d,value:h}=C.target;x(d==="base"||d==="general"||d==="detalle"||d==="vivos"||d==="bolsillos"?{...n,description:{...n.description,[d]:h}}:{...n,[d]:h})},w=C=>{const d=C.target.files[0];if(!d)return;const h=C.target.name;h==="imageFront"?x(j=>({...j,img:d.name})):h==="imageBack"?x(j=>({...j,img2:d.name})):h==="imageSizes"&&x(j=>({...j,img3:d.name})),b(j=>[...j,d]),x(j=>({...j,imgs:[...n.imgs,d.name]}))},y=async C=>{C.preventDefault();const d=Date.now()+"-"+Math.round(Math.random()*1e9);if(n.name===""){l({display:"block",text:"Ingresar nombre"});return}else if(n.price===""){l({display:"block",text:"Ingresar precio"});return}else if(n.description.general===""){l({display:"block",text:"Ingresar descripcion"});return}else if(n.img===""){l({display:"block",text:"Ingresar imagen frente"});return}else if(n.img2===""){l({display:"block",text:"Ingresar dorso"});return}if(t.table==="stock"){if(n.amount===""){l({display:"block",text:"Ingresar cantidad"});return}else if(n.size===""){l({display:"block",text:"Ingresar talle"});return}}l({display:"none",text:""});let h="";/prueba[\$0-9]/.test(n.name)&&(h="-dev");const j=n;j.img=`${D}${h}/${d}-${n.img}`,j.img2=`${D}${h}/${d}-${n.img2}`,j.img3=n.img3!==""?`${D}${h}/${d}-${n.img3}`:void 0,j.table=t.table,j.discountPrice=void 0;const r=new FormData;r.append("blobName",d),r.append("containerName","guardapolvos");try{I.fire({title:`Estas segura que queres agregar ${n.name}?`,icon:"question",confirmButtonText:"Aceptar",confirmButtonColor:"#000",showDenyButton:!0,denyButtonText:"Cancelar"}).then(async a=>{if(a.isConfirmed){try{const u=q(s.token);await K.create(n,u),p.forEach(v=>{r.append("images",v)}),await ie.upload(r,u)}catch(u){if(console.error(u),u.response.status===401)I.fire({title:"Se cerro tu sesion!",text:"Deberas iniciar sesion nuevamente",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(v=>{v.isConfirmed&&o("/login")});else{I.fire({title:"Error inesperado",text:"Intentalo nuevamente mas tarde.",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#000"});return}}I.fire({title:`${n.name} agregado!`,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#000"}).then(()=>{ae(.5),t.onHide()})}})}catch(a){console.error("Error:",a)}};return e.jsxs(F,{...t,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(F.Header,{closeButton:!0,children:e.jsx(F.Title,{id:"contained-modal-title-vcenter",children:"Agregar nuevo guardapolvo"})}),e.jsx(Ve,{variant:"danger",style:{display:`${c.display}`},children:c.text},"danger"),e.jsx(F.Body,{children:e.jsxs(i,{onSubmit:y,encType:"multipart/form-data",children:[e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput1",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Nombre"})}),e.jsx(i.Control,{type:"text",name:"name",placeholder:"nuevo nombre",value:n.name,onChange:m})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"controlInput2",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Precio"})}),e.jsx(i.Control,{type:"text",name:"price",placeholder:"nuevo precio",value:n.price,onChange:m})]}),t.table==="stock"?e.jsx(re,{amount:"",size:"",formData:n,handleInputChange:m}):null,e.jsxs(i.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Descripcion"})}),e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nueva base",name:"base",onChange:m,value:n.description.base}),e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo detalle",name:"detalle",onChange:m,value:n.description.detalle}),e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo vivo",name:"vivos",onChange:m,value:n.description.vivos}),e.jsx(i.Control,{style:{marginBottom:"5px"},type:"text",placeholder:"nuevo bolsillos",name:"bolsillos",onChange:m,value:n.description.bolsillos}),e.jsx(i.Control,{as:"textarea",placeholder:"nueva descripcion general",name:"general",onChange:m,value:n.description.general,rows:3})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Imagen Frente"})}),e.jsx(i.Control,{type:"file",name:"imageFront",onChange:w})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Imagen Dorso"})}),e.jsx(i.Control,{type:"file",name:"imageBack",onChange:w})]}),t.table==="stock"?e.jsxs(i.Group,{className:"mb-3",controlId:"formFile",children:[e.jsx(i.Label,{children:e.jsx("strong",{children:"Imagen Talles"})}),e.jsx(i.Control,{type:"file",name:"imageSizes",onChange:w})]}):null]})}),e.jsxs(F.Footer,{children:[e.jsx(A,{variant:"secondary",onClick:t.onHide,children:"Cerrar"}),e.jsx(A,{variant:"dark",onClick:y,children:"Guardar Cambios"})]})]})};function at(t){let o;return Re(t,s=>{o==null&&(o=s.props.eventKey)}),o}function it(t){const{title:o,eventKey:s,disabled:c,tabClassName:l,tabAttrs:p,id:b}=t.props;return o==null?null:e.jsx(De,{as:"li",role:"presentation",children:e.jsx($e,{as:"button",type:"button",eventKey:s,disabled:c,id:b,className:l,...p,children:o})})}const ge=t=>{const{id:o,onSelect:s,transition:c,mountOnEnter:l=!1,unmountOnExit:p=!1,variant:b="tabs",children:n,activeKey:x=at(n),...m}=Fe(t,{activeKey:"onSelect"});return e.jsxs(He,{id:o,activeKey:x,onSelect:s,transition:Ue(c),mountOnEnter:l,unmountOnExit:p,children:[e.jsx(Oe,{id:o,...m,role:"tablist",as:"ul",variant:b,children:ee(n,it)}),e.jsx(Ke,{children:ee(n,w=>{const y={...w.props};return delete y.title,delete y.disabled,delete y.tabClassName,delete y.tabAttrs,e.jsx(qe,{...y})})})]})};ge.displayName="Tabs";const H=({title:t,table:o,guardapolvosList:s,showCreateModal:c,showEditModal:l})=>{const p=E(f=>f.guardapolvos.nivelInicial),b=E(f=>f.guardapolvos.primaria),n=E(f=>f.guardapolvos.stock),[x,m]=g.useState(!1),[w,y]=g.useState(s);g.useEffect(()=>{o==="primaria"?y(b):o==="stock"?y(n):o==="nivel_inicial"&&y(p)},[s]);const C=E(f=>f.filter.search.toLowerCase()),d=z(),[h,j]=g.useState(1),r=6,a=w.length,u=Math.ceil(a/r),v=f=>{j(f)},T=()=>{const f=(h-1)*r,O=f+r;return w.slice(f,O)},B=()=>{if(m(!0),C!==""){j(1);const f=s.filter(O=>ze(C,O));y(f)}else N();setTimeout(()=>{m(!1)},1e3)},N=()=>{d(Ge("")),y(s)},k=f=>{I.fire({imageUrl:f,showConfirmButton:!1})},S={margin:"0px",fontSize:"16px",background:"inherit",border:"none"},M={marginRight:"5px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",backgroundColor:"#f3f3f3",padding:"4px",borderRadius:"6px"};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex w-100",children:[e.jsx("h4",{className:"label-titulos",children:t}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex"},children:[w.length!==s.length?e.jsx("div",{onClick:()=>N(),style:M,children:"reiniciar"}):null,e.jsx("div",{children:e.jsx(Me,{displaySearch:B,filtrateSearch:null})}),e.jsx("button",{onClick:()=>c(o),style:S,children:e.jsx(Ae,{width:"20",height:"20"})})]})]}),x?e.jsx(Le,{}):e.jsxs("div",{className:"tabla-container",children:[e.jsxs("table",{className:"tabla-de-productoss",children:[e.jsx("thead",{children:o==="stock"?e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Talle"}),e.jsx("th",{children:"Frente"}),e.jsx("th",{children:"Dorso"}),e.jsx("th",{style:{width:"50px"},children:"Descuento"}),e.jsx("th",{})]}):e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Frente"}),e.jsx("th",{children:"Dorso"}),e.jsx("th",{children:"Editar"})]})}),T().map((f,O)=>e.jsx("tbody",{children:e.jsxs("tr",{className:"tr-tabla-productos",children:[e.jsx("td",{children:f.name}),e.jsxs("td",{children:["$ ",f.discountPrice||f.discountPrice>0?f.discountPrice:f.price]}),o==="stock"?e.jsx("td",{children:f.amount}):"",o==="stock"?e.jsx("td",{children:f.size}):"",e.jsx("td",{children:e.jsx("img",{src:f.img,onClick:()=>k(f.img),alt:f.description.general,className:"small-img-admin",style:{cursor:"pointer"}})}),e.jsx("td",{children:e.jsx("img",{src:f.img2,onClick:()=>k(f.img2),alt:f.description.general,className:"small-img-admin",style:{cursor:"pointer"}})}),o==="stock"?e.jsx("td",{children:f.discountPrice||f.discountPrice>0?e.jsx("i",{className:"bi bi-check-lg",style:{color:"green"}}):e.jsx("i",{className:"bi bi-x-lg",style:{color:"red"}})}):"",e.jsx("td",{onClick:()=>l(f,o),style:{cursor:"pointer"},children:e.jsx("i",{className:"bi bi-pencil-square"})})]})},O))]}),e.jsx(We,{currentPage:h,totalPages:u,onPageChange:v})]})]})},ht=()=>{const t=E(a=>a.guardapolvos.nivelInicial),o=E(a=>a.guardapolvos.primaria),s=E(a=>a.guardapolvos.stock),c=E(a=>a.administration.tabChoosen),l=z(),[p,b]=g.useState(!1),[n,x]=g.useState(!1),[m,w]=g.useState(""),[y,C]=g.useState({}),d=(a,u)=>{x(!0),w(u),C(a)},h=a=>{w(a),b(!0)},j=a=>{l(_e(a))},r={width:"100%"};return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:"contenedor-tablas-productos",children:[e.jsx("div",{style:{width:"100%",backgroundColor:"#fff",padding:"10px"},className:"tabs-container",children:e.jsxs(ge,{defaultActiveKey:c,id:"uncontrolled-tab-example",className:"mb-3",fill:!0,onSelect:j,children:[e.jsx(_,{eventKey:"nivel_inicial",title:"Nivel Inicial",style:r,children:e.jsx(H,{title:"NIVEL INICIAL",table:"nivel_inicial",guardapolvosList:t,showCreateModal:h,showEditModal:d})}),e.jsx(_,{eventKey:"primaria",title:"Primaria",style:r,children:e.jsx(H,{title:"PRIMARIA",table:"primaria",guardapolvosList:o,showCreateModal:h,showEditModal:d})}),e.jsx(_,{eventKey:"stock",title:"Stock",style:r,children:e.jsx(H,{title:"STOCK",table:"stock",guardapolvosList:s,showCreateModal:h,showEditModal:d})})]})}),e.jsx(ot,{item:y,show:n,table:m,onHide:()=>x(!1)}),e.jsx(st,{show:p,table:m,onHide:()=>b(!1)})]})})})};export{ht as default};
